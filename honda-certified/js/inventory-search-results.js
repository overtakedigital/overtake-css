"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function isPinInPolygon(e,t){var i=e.getLocation();if(void 0==i)return!1;for(var a=!1,r=0,l=i.longitude,s=i.latitude,n=t.getLocations(),o=0;o<n.length;o++)r++,r==n.length&&(r=0),void 0!=n[o].latitude&&void 0!=n[r].latitude&&void 0!=n[o].longitude&&void 0!=n[r].longitude&&(n[o].latitude<s&&n[r].latitude>=s||n[r].latitude<s&&n[o].latitude>=s)&&n[o].longitude+(s-n[o].latitude)/(n[r].latitude-n[o].latitude)*(n[r].longitude-n[o].longitude)<l&&(a=!a);return a}function isColorExists(e,t){for(var i=0;i<e.length;i++)if(e[i][0]==t)return!0;return!1}function validateEmail(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),maxYearSlider="2019",Map=function(){function e(t){if(_classCallCheck(this,e),Object.defineProperty(this,"featureStr",{enumerable:!0,writable:!0,value:"Leather Interiors|AWD / 4WD|Moonroof|Bluetooth|Android Auto|Apple CarPlay|Rearview Camera|Heated Seats|Rear Entertainment System|Navigation".split("|")}),Object.defineProperty(this,"featureStrMap",{enumerable:!0,writable:!0,value:"INTERIOR MATERIAL|DRIVE|Moonroof|BTUTH|AAUTO|CPLAY|Rearview Camera|Heated Seats|Rear Entertainment System|NAVIG".split("|")}),Object.defineProperty(this,"map",{enumerable:!0,writable:!0,value:null}),Object.defineProperty(this,"layerblue",{enumerable:!0,writable:!0,value:null}),Object.defineProperty(this,"layer",{enumerable:!0,writable:!0,value:null}),Object.defineProperty(this,"layercluster",{enumerable:!0,writable:!0,value:null}),Object.defineProperty(this,"layerclusterblue",{enumerable:!0,writable:!0,value:null}),Object.defineProperty(this,"bluepins",{enumerable:!0,writable:!0,value:new Array}),Object.defineProperty(this,"blackpins",{enumerable:!0,writable:!0,value:new Array}),Object.defineProperty(this,"allpins",{enumerable:!0,writable:!0,value:new Array}),Object.defineProperty(this,"polygon",{enumerable:!0,writable:!0,value:null}),Object.defineProperty(this,"infobox",{enumerable:!0,writable:!0,value:null}),Object.defineProperty(this,"firstLoad",{enumerable:!0,writable:!0,value:!0}),Object.defineProperty(this,"firstAutoFilter",{enumerable:!0,writable:!0,value:!0}),Object.defineProperty(this,"radiusMiles",{enumerable:!0,writable:!0,value:25}),Object.defineProperty(this,"lastRadius",{enumerable:!0,writable:!0,value:this.radiusMiles}),Object.defineProperty(this,"myCenter",{enumerable:!0,writable:!0,value:null}),Object.defineProperty(this,"zoomLevel",{enumerable:!0,writable:!0,value:10}),Object.defineProperty(this,"lastZoomLevel",{enumerable:!0,writable:!0,value:this.zoomLevel}),Object.defineProperty(this,"toBeRemoved",{enumerable:!0,writable:!0,value:new Array}),Object.defineProperty(this,"currentCars",{enumerable:!0,writable:!0,value:new Array}),Object.defineProperty(this,"ajaxData",{enumerable:!0,writable:!0,value:null}),Object.defineProperty(this,"carsArray",{enumerable:!0,writable:!0,value:new Array}),Object.defineProperty(this,"dealersArray",{enumerable:!0,writable:!0,value:new Array}),Object.defineProperty(this,"attributesObj",{enumerable:!0,writable:!0,value:null}),Object.defineProperty(this,"bodyStylesObj",{enumerable:!0,writable:!0,value:null}),Object.defineProperty(this,"specialsObj",{enumerable:!0,writable:!0,value:null}),Object.defineProperty(this,"mapAPIReady",{enumerable:!0,writable:!0,value:!1}),Object.defineProperty(this,"cIndex",{enumerable:!0,writable:!0,value:10}),Object.defineProperty(this,"filter1",{enumerable:!0,writable:!0,value:null}),Object.defineProperty(this,"filter2",{enumerable:!0,writable:!0,value:null}),Object.defineProperty(this,"dealerPois",{enumerable:!0,writable:!0,value:null}),Object.defineProperty(this,"tracking",{enumerable:!0,writable:!0,value:new Array}),Object.defineProperty(this,"filterYear",{enumerable:!0,writable:!0,value:null}),0!=t){this.tracking.radius=!1,this.tracking.price=!1,this.tracking.year=!1,this.tracking.type=!1,this.tracking.vehicle=!1,this.tracking.mileage=!1,this.tracking.dealers=!1,this.tracking.color_int=!1,this.tracking.color_ext=!1,this.tracking.seating=!1,this.tracking.transmission=!1,this.tracking.model=!1,this.tracking.offers=!1,this.tracking.features=!1;var i=this;$(document).ready(function(){function e(){var e=$(".footer"),t=$(".map-list .compare-content");t.offset().top+t.height()>=e.offset().top-10&&t.addClass("fixed"),$(document).scrollTop()+window.innerHeight<e.offset().top&&t.removeClass("fixed")}this.initRadiusSlider(),this.initFilterSliders(),this.initGeneral(i),this.initCompareMiniLayer(i),this.initEmailAlertLayer(i),this.initContactDealer(i),this.initFiltersLayer(i),callFloodlight("inventory-search-results-allmodels"),$(window).width()>991&&i.showFilterDiv(),this.filterYear=m.getParameterByName("modelyear"),this.filterYear&&null!=this.filterYear&&($("#slider-year").slider("values",1,this.filterYear),$("#slider-year").slider("values",0,this.filterYear),$("#slider-year").trigger("slidestop")),$(document).scroll(function(){e()})}.bind(this))}}return _createClass(e,[{key:"satelliteTrack",value:function(e){0==this.tracking[e]&&(_satellite.track("invsearch_filter_"+e),this.tracking[e]=!0)}},{key:"showInfoBox",value:function(e){infobox.setOptions({location:e.getLocation(),title:e.metadata.title,description:e.metadata.description,visible:!0})}},{key:"findPin",value:function(e){for(var t=0;t<map.entities.getLength();t++){var i=map.entities.get(t);if(i instanceof Microsoft.Maps.Pushpin)try{if(i.metadata.phone==e)return i}catch(e){continue}}return null}},{key:"mapViewInventory",value:function(e){$(".map-overlay").fadeIn(300,function(){var t=this.findDealerById(e),i=t.name;$(".narrow-search-to span").html(i),$(".narrow-search-to").show(),$("#filter-dealers").attr("data-values",""),$("#filter-dealers").find(".filter-value").removeClass("filter-value-active"),0==$("#filter-dealers").find(".filter-value[data-value='"+e+"']").hasClass("filter-value-active")&&$("#filter-dealers").find(".filter-value[data-value='"+e+"']").click(),setTimeout(function(){$(".narrow-search-to").fadeOut(300),$(".map-overlay").fadeOut(300,function(){$(".filter-nav-list-view-button").click()})},1500),_satellite.setVar("dealername",i),_satellite.track("invsearch_results_map_inventory")}.bind(this))}},{key:"loadBingMap",value:function(){$(".itt-zip").html(localStorageGetItemCommon("_GeoCurrentZipCode")),this.map=new Microsoft.Maps.Map(document.getElementById("myMap"),{credentials:bingMapsAPIKey,disableScrollWheelZoom:!0,showDashboard:!0,showLocateMeButton:!1,showMapTypeSelector:!1,enableClickableLogo:!1,enableSearchLogo:!1,showCopyright:!1,showScalebar:!1}),this.layerblue=new Microsoft.Maps.Layer,this.layer=new Microsoft.Maps.Layer,this.map.layers.insert(this.layerblue),this.map.layers.insert(this.layer),Microsoft.Maps.loadModule("Microsoft.Maps.SpatialDataService",function(){Microsoft.Maps.loadModule("Microsoft.Maps.SpatialMath",function(){this.mapAPIReady=!0}.bind(this)),Microsoft.Maps.Events.addHandler(this.map,"mousedown",function(){this.firstLoad=!1}.bind(this)),Microsoft.Maps.Events.addHandler(this.map,"viewchangeend",function(){this.mapViewChange()}.bind(this)),this.infobox=new Microsoft.Maps.Infobox(new Microsoft.Maps.Location(0,0),{visible:!1}),this.infobox.setMap(this.map)}.bind(this)),Microsoft.Maps.loadModule("Microsoft.Maps.Clustering",function(){}.bind(this))}},{key:"loadDealerLocations",value:function(){var e="/handlers/find-dealers.ashx?radius=250&zip="+localStorageGetItemCommon("_GeoCurrentZipCode");$.getJSON(e,function(e){var t=e.POIResponse.POIs.POI;this.dealerPois=t,this.initMapBluePushPins(t),this.hideCertainBluePushPins(this)}.bind(this))}},{key:"initMapWithZip",value:function(e){$("#filter-dealers").find(".filter-value-active").click();var t=localStorageGetItemCommon("_GeoCurrentLat"),i=localStorageGetItemCommon("_GeocurrentLong");void 0!=localStorageGetItemCommon("lastRadius")&&(this.lastRadius=localStorageGetItemCommon("lastRadius")),this.layer.clear(),this.myCenter=new Microsoft.Maps.Location(t,i);var a=Microsoft.Maps.SpatialMath.getRegularPolygon(this.myCenter,this.lastRadius,36,Microsoft.Maps.SpatialMath.DistanceUnits.Miles);this.polygon=new Microsoft.Maps.Polygon(a,{fillColor:new Microsoft.Maps.Color(100,156,228,232),strokeColor:new Microsoft.Maps.Color(100,156,228,232)}),this.layer.add(this.polygon),$(".tmp-honda-loader").fadeIn(300),this.map.setView({center:this.myCenter,zoom:this.zoomLevel}),this.setZoomBasedOnRadius(),this.getAjaxData(!1,!0,e,this.lastRadius)}},{key:"initMap",value:function(e,t){this.layer.clear(),this.myCenter=this.map.getCenter();var i=Microsoft.Maps.SpatialMath.getRegularPolygon(this.myCenter,this.lastRadius,36,Microsoft.Maps.SpatialMath.DistanceUnits.Miles);if(this.polygon=new Microsoft.Maps.Polygon(i,{fillColor:new Microsoft.Maps.Color(100,156,228,232),strokeColor:new Microsoft.Maps.Color(100,156,228,232)}),this.layer.add(this.polygon),this.setZoomBasedOnRadius(),0==e)$(".tmp-honda-loader").fadeIn(300),this.map.setView({center:this.myCenter,zoom:this.zoomLevel}),this.getAjaxData(!1,!0);else if(1==e){var a=this.dealersArray,r=t;this.updateCarCountForDealersList(r,a),this.initMapPushPins(a),this.initMapBluePushPins(this.dealerPois)}else if(2==e){if(0==$("#search-map-move").is(":checked"))return;$(".tmp-honda-loader").fadeIn(300);var l=this.myCenter.latitude,s=this.myCenter.longitude;getPinCode(l,s,function(e,t,i){if(null==e)console.log("zip is BAD. let's revert back to previous zip="+localStorageGetItemCommon("_GeoCurrentZipCode")),this.initMapWithZip(localStorageGetItemCommon("_GeoCurrentZipCode"));else{$("#filter-dealers").find(".filter-value-active").click(),$(".itt-zip").html(e),this.getAjaxData(!0,!0,e);var a=e;$(window).trigger("app.zipchanged",{zip:a})}}.bind(this))}else 3==e?($(".tmp-honda-loader").fadeIn(300),this.getAjaxData(!0,!0,null,this.lastRadius),localStorageSetItemCommon("lastRadius",this.lastRadius)):5==e&&($(".tmp-honda-loader").fadeIn(300),this.getAjaxData(!1,!0,null,this.radiusMiles));this.hideCertainBluePushPins(this)}},{key:"setZoomBasedOnRadius",value:function(){this.lastZoomLevel=this.zoomLevel-this.lastRadius/65,25==this.lastRadius&&(this.lastZoomLevel=this.zoomLevel),this.lastRadius<25&&(this.lastZoomLevel=this.zoomLevel+(1-this.lastRadius/25)),this.map.setView({zoom:this.lastZoomLevel}),this.hideInfoBox()}},{key:"getAjaxData",value:function(e,t,i,a){this.resetLoadMoreStep();var r=localStorageGetItemCommon("_GeoCurrentZipCode"),l=this.radiusMiles;void 0!=i&&null!=i&&(r=i),void 0!=a&&(l=a);var s="/handlers/get-inventory-data.ashx?zip="+r+"&radius="+l;$.getJSON(s,function(i){var a=i.Output.Results;if(this.ajaxData=a,null==a.Models)return $(".list-no-result").fadeIn(300),$(".list-items, .tmp-honda-loader, .btn-load-more").fadeOut(300),void this.applyData([]);$(".filter-nav-map-view-button:visible, .list-car-map-btn:visible").length>0&&($(".list-items").show(),$(".list-no-result").hide());for(var s=i.Output.Results.ModelAttributes.ModelAttribute,n=new Array,o=0;o<s.length;o++){var d=s[o];"# of Passengers"==d["@Code"]&&n.push(d)}this.initStylesAttributesLists(a);var c=this.initCarsList(a.Models.Model,n,a.Dealers.Dealer,a.Specials),u=this.initDealersList(c,a.Dealers.Dealer);this.carsArray=c,this.dealersArray=u,this.initFilterUIWithNewData(c,u,"",e,n),this.initFilterUI(c,u,"",e,n),this.initMapPushPins(u),this.currentCars=c,t&&this.applyData(c),1==e&&this.applyMultiFilters(),this.autoFiltersByQueryString(),this.autoFiltersFromVDP(),$(".tmp-honda-loader").fadeOut(300);var h=new Date;i.datetime=h.toGMTString(),i.zip=r,i.radius=l,this.loadDealerLocations(),turnOnOfferButton()}.bind(this)).fail(function(){this.showGlobalErrorMSG("inventory")}.bind(this))}},{key:"autoFiltersByQueryString",value:function(){if(0!=this.firstAutoFilter){var e=this.getParameterByName("program"),t=this.getParameterByName("year"),i=this.getParameterByName("style"),a=this.getParameterByName("trim"),r=this.getParameterByName("modelgroupname"),l=this.getParameterByName("price"),s=this.getParameterByName("dealerid");if("undefined"==e&&(e=null),"undefined"==t&&(t=null),"undefined"==i&&(i=null),"undefined"==a&&(a=null),"undefined"==r&&(r=null),"undefined"==l&&(l=null),"undefined"==s&&(s=null),null!=t&&($("#slider-year").slider("values",1,t),$("#slider-year").slider("values",0,t),$("#slider-year").trigger("slidestop")),null!=e){var n=$("#filter-program").find(".filter-value").filter(function(){return $(this).attr("data-value").toLowerCase()==e.toLowerCase()});$(n).length||($(".list-no-result").fadeIn(300),$(".list-items, .tmp-honda-loader").fadeOut(300),$(".btn-load-more").fadeOut(300)),$(n).click()}if(null!=i){var n=$("#filter-type").find(".filter-value").filter(function(){return $(this).attr("data-value").toLowerCase()==i.toLowerCase()});$(n).click()}if(null!=r)for(var o=r.split("|"),d=0;d<o.length;d++){var n=$("#filter-vehicle").find(".filter-value").filter(function(){return $(this).attr("data-value").toLowerCase()==o[d].toLowerCase()});$(n).length||($(".list-no-result").fadeIn(300),$(".list-items, .tmp-honda-loader").fadeOut(300),$(".btn-load-more").fadeOut(300)),$(n).click()}if(null!=a){var n=$("#filter-model").find(".filter-value").filter(function(){return $(this).attr("data-value").toLowerCase()==a.toLowerCase()});$(n).click()}null!=l&&($("#slider-price").slider("value",l),$("#slider-price").trigger("slidestop")),null!=s&&$("#filter-dealers").find(".filter-value[data-value='"+s+"']").click(),this.firstAutoFilter=!1}}},{key:"autoFiltersFromVDP",value:function(){if(-1!=document.referrer.toLowerCase().indexOf("vehicle-details?vin=")&&!(void 0==localStorageGetItemCommon("filter1")&&void 0==localStorageGetItemCommon("filter2")||""==localStorageGetItemCommon("filter1")&&""==localStorageGetItemCommon("filter2"))){if(void 0!=localStorageGetItemCommon("filter1")&&"null"!=localStorageGetItemCommon("filter1"))for(var e=JSON.parse(localStorageGetItemCommon("filter1")),t=0;t<e.length;t++){var i=e[t].max,a=e[t].min;"dsrp"==e[t].filter?($("#slider-price").slider("value",i),$("#slider-price").trigger("slidestop")):"year"==e[t].filter?($("#slider-year").slider("values",1,i),$("#slider-year").slider("values",0,a),$("#slider-year").trigger("slidestop")):"mileage"==e[t].filter&&($("#slider-mileage").slider("value",i),$("#slider-mileage").trigger("slidestop"))}if(void 0!=localStorageGetItemCommon("filter2")&&"null"!=localStorageGetItemCommon("filter2"))for(var r=JSON.parse(localStorageGetItemCommon("filter2")),t=0;t<r.length;t++)for(var l=r[t].filter,s=r[t].values.split(", "),n=0;n<s.length;n++){var o=s[n];$(".filter-values[data-filter-type='"+l+"']").find(".filter-value[data-value='"+o+"']").click()}}}},{key:"initStylesAttributesLists",value:function(e){if(null!=e.BodyStyles){var t=new hcpv_bodystyle(e.BodyStyles.BodyStyle);this.bodyStylesObj=t}else console.log("BodyStyles is NULL from API");if(null!=e.ModelAttributes){var i=new hcpv_modelattribute(e.ModelAttributes.ModelAttribute);this.attributesObj=i}else console.log("ModelAttributes is NULL from API");if(null!=e.Specials){var a=new hcpv_special(e.Specials.Special);this.specialsObj=a}}},{key:"initDealersList",value:function(e,t){for(var i=new Array,a=0;a<e.length;a++)-1==i.indexOf(e[a].dealerId)&&i.push(e[a].dealerId);for(var r=new Array,l=0;l<t.length;l++){var s=t[l],n=s.DealerID,o=s.DealerName,d=s.DealerAddress,c=s.DealerCity,u=s.DealerState,h=s.DealerZip,f=s.DealerLat,v=s.DealerLong,m=s.DealerPhoneNo,p=s.DealerFaxNo,y=s.DealerEmail,g=s.DealerHours,b=s.DealerURL,$=s.DealerInternetMngr,w=s.DealerDistance,C=s.DealerAttributes,x=new hcpv_dealer(n,o,d,c,u,h,f,v,m,p,y,g,b,$,w,C);r.push(x)}return r=this.updateCarCountForDealersList(e,r)}},{key:"updateCarCountForDealersList",value:function(e,t){for(var i=0;i<t.length;i++){t[i].count=0;for(var a=0;a<e.length;a++)e[a].dealerId==t[i].id&&(t[i].count=t[i].count+1,null==e[a].dealer&&(e[a].dealer=t[i],e[a].distance=t[i].distance))}return t}},{key:"hideCertainBluePushPins",value:function(e){return}},{key:"initMapBluePushPins",value:function(e){if(null!=e){for(var t=new Array,i=0;i<this.dealersArray.length;i++)t.push(this.dealersArray[i].id);for(var a=0;a<e.length;a++){var r=e[a];if(-1==t.indexOf(r.POIId)){var l=new Microsoft.Maps.Location(r.Latitude,r.Longitude);this.createBluePushpin(l,r,function(e,t,i,a){e.metadata={normalicon:t,activeicon:i,dealerid:a.POIId,description:'<div class="map-infobox" data-did="'+a.POIId+'"><h4>'+a.POIName+"</h4></div>"},Microsoft.Maps.Events.addHandler(e,"click",function(e){this.pushpinClicked(e)}.bind(this)),Microsoft.Maps.Events.addHandler(e,"mouseover",function(e){this.pushpinClicked(e)}.bind(this)),0==this.isDealerPushPinInArray(e)&&(this.allpins.push(e),this.layercluster.add(e))}.bind(this))}}}}},{key:"initMapPushPins",value:function(e){this.allpins=new Array,null!=this.layercluster&&this.layercluster.clear(),this.layercluster=new Microsoft.Maps.ClusterLayer(this.allpins,{clusteredPinCallback:function(e){var t=e.containedPushpins.length;e.setOptions({icon:'<svg xmlns="http://www.w3.org/2000/svg" width="50" height="50"><circle cx="25" cy="25" r="25" fill="#000" font-family="Verdana" stroke="#fff" stroke-width="1" /><text xmlns="http://www.w3.org/2000/svg" font-family="Verdana" text-anchor="middle" fill="#fff"><tspan x="50%" y="-5%" font-size="20px" dy="1.2em">{0}</tspan><tspan x="50%" y="50%" font-size="10px" dy="1.2em">Dealers</tspan></text></svg>'.replace("{0}",t),text:""})},gridSize:60}),this.map.layers.insert(this.layercluster);for(var t=0;t<e.length;t++){var i=e[t];if(null!=i.lat&&0!=i.count){var a=new Microsoft.Maps.Location(i.lat,i.lon);this.createPushpin(a,i,function(e,t,i,a){e.metadata={normalicon:t,activeicon:i,dealerid:a.id,description:'<div class="map-infobox" data-did="'+a.id+'"><h4>'+a.name+"</h4><h5>"+a.distance+' miles away</h5><button type="button" class="btn btn-secondary map-infobox-btn-view-inventory" onclick="m.mapViewInventory('+a.id+');">VIEW INVENTORY</button></div>'},Microsoft.Maps.Events.addHandler(e,"click",function(e){this.pushpinClicked(e)}.bind(this)),Microsoft.Maps.Events.addHandler(e,"mouseover",function(e){e.target.setOptions({icon:e.target.metadata.activeicon}),this.pushpinClicked(e)}.bind(this)),Microsoft.Maps.Events.addHandler(e,"mousedown",function(e){}),Microsoft.Maps.Events.addHandler(e,"mouseout",function(e){e.target.setOptions({icon:e.target.metadata.normalicon})}),0==this.isDealerPushPinInArray(e)&&(this.allpins.push(e),this.layercluster.add(e))}.bind(this))}}}},{key:"initCarsList",value:function(e,t,i,a){function r(e,t){if(i)for(var a,r,l=0;l<i.length;l++)if(i[l].DealerID==e){if(a=i[l].DealerName,r=i[l].DealerDistance,"dealerName"==t)return a;if("dealerDistance"==t)return r}}for(var l=new Array,s=e,n=0;n<s.length;n++)for(var o=s[n],d=0;d<o.ModelVINsOnSite.VIN.length;d++){var c=o.ModelVINsOnSite.VIN[d].VIN,u=o.ModelVINsOnSite.VIN[d].StockNo,h=o["@DealerId"],f=r(h,"dealerName"),v=r(h,"dealerDistance"),m=o["@ModelId"],p=o.ModelYear,y=o.ModelGroupName,g=o.ModelTrim,b=o.ModelMarketingName,$=o.ModelTransmission,w=o.ModelTransmissionMarketingName,C=o.ModelMSRP,x=parseInt(o.ModelVINsOnSite.VIN[d].Mileage),M=parseFloat(o.ModelVINsOnSite.VIN[d].DSRP),k=new Date(o.ModelVINsOnSite.VIN[d].CertDate),S=o.ModelVINsOnSite.VIN[d].CPOTier,I=o.ModelVINsOnSite.VIN[d].ModelExteriorColorName,P=o.ModelVINsOnSite.VIN[d].ModelBaseColor,T=o.ModelVINsOnSite.VIN[d].ModelInteriorColorName,A=o.ModelVINsOnSite.VIN[d].Photos,O=o.ModelVINsOnSite.VIN[d].ModelStockPhotos,N=o.BodyStyles,D=null;void 0!=o.ModelAttributes&&(D=o.ModelAttributes.ModelAttribute);var E=o.Specials;if(void 0!=E&&void 0!=a&&1==E["@Count"])for(var _,L,V=a.Special,B=E.Special[0]["@id"],R=0;R<V.length;R++)V[R]["@id"]==B&&(void 0!=V[R].PaymentTerms.FinanceTerms.FinanceTerm?(_=V[R].PaymentTerms.FinanceTerms.FinanceTerm[0].APR,L=V[R].PaymentTerms.FinanceTerms.FinanceTerm[0].TermMin):_=V[R].PaymentTerms.FinanceTerms.SampleFinancePayment.SampleAPR);var F=o.ModelVINsOnSite.VIN[d].ModelInteriorColorCD,j=o.ModelVINsOnSite.VIN[d].ModelBaseColor,z=o.EngineName,Y=o.ModelVINsOnSite.VIN[d].VHRUrl,G=o.ModelVINsOnSite.VIN[d].ICEUrl,q=new hcpv_car(c,u,h,f,v,m,p,y,g,b,$,w,C,x,M,k,P,S,I,T,A,O,N,D,E,_,L,F,j,z,Y,G);q.generateFeaturesList(this.attributesObj),null!=t&&q.generateSeating(t),l.push(q)}return l}},{key:"initFilterUIWithNewData",value:function(e,t,i,a,r){function l(e,t){return e-t}for(var s=this.bodyStylesObj,n=new Array,o=new Array,d=new Array,c=r,u=new Array,h=(new Array,new Array),f=new Array,v=new Array,m=this.featureStr,p="",y="",g="",b="",w="",C="",x="",M="",k="",S="",I=0;I<e.length;I++){if(null!=e[I].styles)for(var P=0;P<e[I].styles.BodyStyle.length;P++)-1==o.indexOf(e[I].styles.BodyStyle[P])&&o.push(e[I].styles.BodyStyle[P]);if(-1==n.indexOf(e[I].cpoTier)&&n.push(e[I].cpoTier),-1==d.indexOf(e[I].groupName)&&d.push(e[I].groupName),-1==u.indexOf(e[I].trimName)){if(null==e[I].trimName)continue;u.push(e[I].trimName)}h.every(function(t){return t.value!==e[I].transmission})&&h.push({label:e[I].transmissionName,value:e[I].transmission}),0==isColorExists(f,e[I].exColor)&&null!=e[I].exColor&&f.push([e[I].exColor,e[I].exColorCD]),0==isColorExists(v,e[I].inColor)&&null!=e[I].inColor&&v.push([e[I].inColor,e[I].inColorCD])}c.sort(l),o.sort(),n.sort(),d.sort(),u.sort(),h.sort(function(e,t){return e.value<t.value?0:1}),f.sort(function(e,t){return e[0]>t[0]?1:e[0]<t[0]?-1:0}),v.sort(function(e,t){return e[0]>t[0]?1:e[0]<t[0]?-1:0});for(var I=0;I<o.length;I++)o[I]=s.getStyleNameById2(o[I]),p+='<div class="filter-value" data-value="'+o[I]+'">'+o[I]+"</div>";if(c.length>0)for(var I=0;I<c.length;I++){var T=c[I]["@Value"].trim().replace('"',"");y+='<div class="filter-value filter-seats" data-value="'+T+'"><input type="radio" class="filter-value-seat" name="seating"  id="a'+T+'" style="outline: none;"></input><label for="'+T+'" style="padding-left: 7px;"> '+T+"</label></div>"}for(var I=0;I<n.length;I++){var A="";A="T1"==n[I]?"HondaTrue Certified":"T2"==n[I]?"HondaTrue Certified+":"Previous Program",g+='<div class="filter-value" data-value="'+n[I]+'">'+A+"</div>"}for(var I=0;I<d.length;I++)b+='<div class="filter-value" data-value="'+d[I]+'">'+d[I]+"</div>";for(var I=0;I<u.length;I++)w+='<div class="filter-value" data-value="'+u[I]+'">'+u[I]+"</div>";for(var I=0;I<h.length;I++)C+='<div class="filter-value" data-value="'+h[I].value+'">'+h[I].label+"</div>";for(var I=0;I<f.length;I++)M+='<div class="filter-value filter-value-color fvc-'+f[I][0]+'" style="background-color:'+f[I][0]+';" data-value="'+f[I][0]+'" data-value2="'+f[I][1]+'"><div>'+f[I][0]+"</div></div>";for(var I=0;I<v.length;I++)k+='<div class="filter-value fvci-'+v[I][0]+'" data-value="'+v[I][0]+'" data-value2="'+v[I][1]+'">'+v[I][0]+"</div>";for(var I=0;I<m.length;I++)S+='<div class="filter-value" data-value="'+m[I]+'" data-value2="'+this.featureStrMap[I]+'">'+m[I]+"</div>";"filter-type"!=i&&$("#filter-type").html(p),"filter-seat"!=i&&$("#filter-seat").html(y),"filter-program"!=i&&$("#filter-program").html(g),"filter-vehicle"!=i&&$("#filter-vehicle").html(b),"filter-model"!=i&&$("#filter-model").html(w),"filter-transmission"!=i&&$("#filter-transmission").html(C),"filter-excolor"!=i&&$("#filter-excolor").html(M+'<div class="cls"></div>'),"filter-incolor"!=i&&$("#filter-incolor").html(k+'<div class="cls"></div>'),"filter-features"!=i&&$("#filter-features").html(S+'<div class="cls"></div>');for(var O=new Array,I=0;I<e.length;I++)-1==O.indexOf(e[I].dealerId)&&O.push(e[I].dealerId);for(var I=0;I<t.length;I++){null!=t[I].lat&&(x+='<div class="filter-value" data-value="'+t[I].id+'" data-display-value="'+t[I].name+'">'+t[I].name+"<br><span>"+t[I].city+", "+t[I].state+" "+t[I].zip5()+"</span></div>")}"filter-dealers"!=i&&$("#filter-dealers").html(x),1==a&&$(".filter-values").each(function(e){for(var t=$(this).attr("data-values").split(", "),i=0;i<t.length;i++)$(this).find(".filter-value").each(function(e){$(this).html()==t[i]&&$(this).addClass("filter-value-active"),$(this).attr("data-value")==t[i]&&$(this).addClass("filter-value-active")})})}},{key:"initFilterUI",value:function(e,t,i,a,r){for(var l=this.bodyStylesObj,s=new Array,n=new Array,o=new Array,d=new Array,c=(new Array,new Array),u=new Array,h=new Array,f=r,v=this.featureStr,m="",p="",y="",g="",b="",w="",C="",x="",M="",k="",S=0;S<e.length;S++){if(null!=e[S].styles)for(var I=0;I<e[S].styles.BodyStyle.length;I++)-1==s.indexOf(e[S].styles.BodyStyle[I])&&s.push(e[S].styles.BodyStyle[I]);if(-1==n.indexOf(e[S].cpoTier)&&n.push(e[S].cpoTier),-1==o.indexOf(e[S].groupName)&&o.push(e[S].groupName),-1==d.indexOf(e[S].trimName)){if(null==e[S].trimName)continue;d.push(e[S].trimName)}c.every(function(t){return t.value!==e[S].transmission})&&c.push({label:e[S].transmissionName,value:e[S].transmission}),0==isColorExists(u,e[S].exColor)&&null!=e[S].exColor&&u.push([e[S].exColor,e[S].exColorCD]),0==isColorExists(h,e[S].inColor)&&null!=e[S].inColor&&h.push([e[S].inColor,e[S].inColorCD])}$(".filter-value").each(function(){var e=$(this).parents(".filter-values").attr("id");"filter-seat"!=e&&i!=e&&$(this).addClass("filter-value-disabled")});for(var S=0;S<s.length;S++)s[S]=l.getStyleNameById2(s[S]),m+='<div class="filter-value" data-value="'+s[S]+'">'+s[S]+"</div>",$(".filter-value[data-value='"+s[S]+"']").removeClass("filter-value-disabled");if(null!=f&&f.length>0)for(var S=0;S<f.length;S++)k+='<div class="filter-value" data-value="'+f[S]["@Value"].trim()+'">'+f[S]+"</div>",$(".filter-value[data-value='"+f[S]["@Value"].trim()+"']").removeClass("filter-value-disabled");for(var S=0;S<n.length;S++)p+='<div class="filter-value" data-value="'+n[S]+'">'+n[S]+"</div>",$(".filter-value[data-value='"+n[S]+"']").removeClass("filter-value-disabled");for(var S=0;S<o.length;S++)y+='<div class="filter-value" data-value="'+o[S]+'">'+o[S]+"</div>",$(".filter-value[data-value='"+o[S]+"']").removeClass("filter-value-disabled");for(var S=0;S<d.length;S++)g+='<div class="filter-value" data-value="'+d[S]+'">'+d[S]+"</div>",$(".filter-value[data-value='"+d[S]+"']").removeClass("filter-value-disabled");for(var S=0;S<c.length;S++)b+='<div class="filter-value" data-value="'+c[S].value+'">'+c[S].label+"</div>",$(".filter-value[data-value='"+c[S].value+"']").removeClass("filter-value-disabled");for(var S=0;S<u.length;S++)C+='<div class="filter-value filter-value-color fvc-'+u[S][0]+'" data-value="'+u[S][0]+'" data-value2="'+u[S][1]+'"><div>'+u[S][0]+"</div></div>",$("#filter-excolor .filter-value[data-value='"+u[S][0]+"']").removeClass("filter-value-disabled");for(var S=0;S<h.length;S++)x+='<div class="filter-value fvci-'+h[S][0]+'" data-value="'+h[S][0]+'" data-value2="'+h[S][1]+'">'+h[S][0]+"</div>",$("#filter-incolor .filter-value[data-value='"+h[S][0]+"']").removeClass("filter-value-disabled");for(var S=0;S<v.length;S++)M+='<div class="filter-value" data-value="'+v[S]+'" data-value2="'+this.featureStrMap[S]+'">'+v[S]+"</div>",$(".filter-value[data-value='"+v[S]+"']").removeClass("filter-value-disabled");$("#filter-dealers .filter-value").removeClass("filter-value-disabled");for(var P=new Array,S=0;S<e.length;S++)-1==P.indexOf(e[S].dealerId)&&P.push(e[S].dealerId);for(var S=0;S<t.length;S++){null!=t[S].lat&&(w+='<div class="filter-value" data-value="'+t[S].id+'" data-display-value="'+t[S].name+'">'+t[S].name+"<br><span>"+t[S].city+", "+t[S].state+" "+t[S].zip5()+"</span></div>",$(".filter-value[data-value='"+t[S].id+"']").removeClass("filter-value-disabled"))}var T=0;$(".filter-value-txt").each(function(){""!=$(this).html()&&T++}),1==a&&$(".filter-values").each(function(e){for(var t=$(this).attr("id"),i=$(this).attr("data-values").split(", "),a=0;a<i.length;a++)$(this).find(".filter-value").each(function(e){"filter-seat"!=t&&($(this).html()==i[a]&&$(this).addClass("filter-value-active"),$(this).attr("data-value")==i[a]&&$(this).addClass("filter-value-active"))})})}},{key:"initRadiusSlider",value:function(){var e=this;$("#slider-radius").slider({min:5,max:250,value:25,create:function(){var e=$(this).parent().find(".current-range"),t=$(this).parent().find(".handle"),i=$(this).slider("option","min"),a=$(this).slider("option","max"),r=$(this).slider("option","value"),l=r+" mi.";e.text(l),$(t).find(".min").html(i+" mi."),$(t).find(".max").html(a+" mi.")},slide:function(t,i){var a=$(this).parent().find(".current-range"),r=i.value+" mi.";a.text(r),e.satelliteTrack("radius")},change:function(e,t){var i=$(this).parent().find(".current-range"),a=t.value+" mi.";i.text(a),$(".itt-radius").html(t.value)}})}},{key:"initFilterSliders",value:function(){function e(e,t,i,a){var l=$(e).slider("option"),s=(l.min,l.max),n=$(e).parent().find(".current-range");console.log("options.value: ",l.value);var o="";"slider-price"==$(e).attr("id")&&l.value>="29500"&&(o="+"),"slider-mileage"==$(e).attr("id")&&l.value>=s&&(o="+");var d=i+l.value+a+o;void 0!=t&&(d=i+t.value+a+o),console.log("string: ",d),n.text(d);var c=$(e).attr("id");"slider-price"==c&&r.satelliteTrack("price"),"slider-mileage"==c&&r.satelliteTrack("mileage")}function t(e,t){var i=$(e).parent().find(".current-range"),a=$(e).slider("option"),l=a.values[0],s=a.values[1];void 0!=t&&(l=t.values[0],s=t.values[1]);var n=l+" - "+s;i.text(n),"slider-year"==$(e).attr("id")&&r.satelliteTrack("year")}function i(e,t,i,a){var r=$(e).parent().find(".current-range"),l=$(e).parent().find(".handle"),s=$(e).slider("option"),n=s.min,o=s.max,d=t+o+i+a;r.text(d),$(l).find(".min").html(t+n+i),$(l).find(".max").html(t+o+i+a)}function a(e){var t=$(e).parent().find(".current-range"),i=$(e).parent().find(".handle"),a=$(e).slider("option"),r=a.min,l=a.max,s=r+" - "+l;t.text(s),$(i).find(".min").html(r),$(i).find(".max").html(l)}var r=this,l=[5e3,3e4];$("#slider-price").slider({min:l[0],max:l[1],value:l[1],step:1,create:function(){i(this,"$","","+")},slide:function(t,i){e(this,i,"$","")},change:function(t,i){e(this,i,"$","")}}),l=[0,8e4],$("#slider-mileage").slider({min:l[0],max:l[1],value:l[1],step:1e3,create:function(){i(this,""," mi.","+")},slide:function(t,i){e(this,i,""," mi.")},change:function(t,i){e(this,i,""," mi.")}}),l=[2014,maxYearSlider],$("#slider-year").slider({range:!0,min:l[0],max:l[1],values:[l[0],l[1]],create:function(){a(this)},slide:function(e,i){t(this,i)},change:function(e,i){t(this,i)}})}},{key:"resetBackToCacheData",value:function(){var e=this.ajaxData;this.initStylesAttributesLists(e);for(var t=e.ModelAttributes.ModelAttribute,i=new Array,a=0;a<t.length;a++){var r=t[a];"# of Passengers"==r["@Code"]&&i.push(r)}var l=this.initCarsList(e.Models.Model,i,e.Dealers.Dealer),s=this.initDealersList(l,e.Dealers.Dealer);this.dealersArray=s,this.initFilterUI(l,s,null,null,null),this.initMapPushPins(s),this.currentCars=l,isapply&&this.applyData(l)}},{key:"mapViewChange",value:function(){if(this.hideInfoBox(),1!=this.firstLoad){if(this.lastZoomLevel!=this.map.getZoom())return void(this.lastZoomLevel=this.map.getZoom());$("#search-map-move").is(":checked")?($(".map-search-when-move .radio-box").eq(0).show(),$(".map-search-when-move .radio-box").eq(1).hide()):($(".map-search-when-move .radio-box").eq(0).hide(),$(".map-search-when-move .radio-box").eq(1).show()),this.initMap(2)}}},{key:"hideInfoBox",value:function(){this.infobox.setOptions({visible:!1})}},{key:"pushpinClicked",value:function(e){e.target.metadata&&(this.infobox.setOptions({location:e.target.getLocation(),offset:new Microsoft.Maps.Point(0,35),title:e.target.metadata.title,description:e.target.metadata.description,visible:!0}),e.target.setOptions({icon:e.target.metadata.activeicon}))}},{key:"createBluePushpin",value:function(e,t,i){var a=new Image,r=new Image;a.src="/images/map/map-icon-honda-dealer.png",
r.src="/images/map/map-icon-honda-dealer.png",a.onload=function(){var l=document.createElement("canvas");l.width=a.width,l.height=a.height;var s=l.getContext("2d");s.drawImage(a,0,0),s.font="10px AvenirNextRoundedW01-Re",s.fillStyle="white",s.textAlign="center";var n=l.toDataURL(),o=new Microsoft.Maps.Pushpin(e,{icon:n,anchor:new Microsoft.Maps.Point(26,40)});r.onload=function(){var e=document.createElement("canvas");e.width=r.width,e.height=r.height;var a=e.getContext("2d");a.drawImage(r,0,0),a.font="10px AvenirNextRoundedW01-Re",a.fillStyle="black",a.textAlign="center";var l=e.toDataURL();i&&i(o,n,l,t)}}}},{key:"createPushpin",value:function(e,t,i){var a=new Image,r=new Image;a.src="/images/map/map-icon-inventory.png",r.src="/images/map/map-icon-inventory-selected.png",a.onload=function(){var l=document.createElement("canvas");l.width=a.width,l.height=a.height;var s=l.getContext("2d");s.drawImage(a,0,0),s.font="10px AvenirNextRoundedW01-Re",s.fillStyle="white",s.textAlign="center",s.fillText(t.count+" cars",l.width/2,l.height/2+15);var n=l.toDataURL(),o=new Microsoft.Maps.Pushpin(e,{icon:n,anchor:new Microsoft.Maps.Point(30,30)});r.onload=function(){var e=document.createElement("canvas");e.width=r.width,e.height=r.height;var a=e.getContext("2d");a.drawImage(r,0,0),a.font="10px AvenirNextRoundedW01-Re",a.fillStyle="black",a.textAlign="center",a.fillText(t.count+" cars",e.width/2,e.height/2+15);var l=e.toDataURL();i&&i(o,n,l,t)}}}},{key:"applyData",value:function(e,t){var i=angular.element($("#my-map-scope")).scope();1==t?i.$apply(function(){alert("compareCarList 1810"),i.compareCarList=e}):2==t?i.$apply(function(){i.compareCodeList=e}):3==t?i.$apply(function(){i.compareSpecifications=e}):(i.$apply(function(){i.myCarList=e}),this.showHideLoadMoreButton(e),$("#dtm-data-layer").append('<script>dtmDataLayerSearch = { "resultcount":"'+e.length+'"}<\/script>'))}},{key:"updateFilterCount",value:function(){var e=$(".filter[data-filter='true']").length,t=$(".filter-value-active").length;$(".filter-nav-filters-apply").html(e+t)}},{key:"showFilterDiv",value:function(){$(".filter-nav").addClass("filter-nav-active"),$(".filters").addClass("filters-active"),$(".filters-outer").show(300),$(".map-list").addClass("map-list-push-over"),$(".mini-compare-bar").addClass("super-mini"),$(".list-items").addClass("list-items-3"),$(window).trigger("scroll")}},{key:"findCarByVin",value:function(e){for(var t=0;t<this.currentCars.length;t++)if(this.currentCars[t].vin==e)return this.currentCars[t];return null}},{key:"isDealerPushPinInArray",value:function(e){for(var t=0;t<this.allpins.length;t++){if(this.allpins[t].metadata.dealerid==e.metadata.dealerid)return!0}return!1}},{key:"findDealerById",value:function(e){for(var t=0;t<this.dealersArray.length;t++)if(this.dealersArray[t].id==e)return this.dealersArray[t];return null}},{key:"findObjectByProperty",value:function(e,t,i){for(var a=0;a<e.length;a++)if(e[a][t]==i)return e[a];return null}},{key:"findObjectIndexByProperty",value:function(e,t,i){for(var a=0;a<e.length;a++)if(e[a][t]==i)return a;return-1}},{key:"findObjectArrayMaxMinValue",value:function(e,t){for(var i=new Array,a=0;a<e.length;a++)i.push(parseFloat(e[a][t]));return[Math.min.apply(Math,i),Math.max.apply(Math,i)]}},{key:"getParameterByName",value:function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var i=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)","i"),a=i.exec(t);return a?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null}},{key:"initContactDealer",value:function(e){$(".contact-box-btn-x, .contact-filter-btn-edit, .contact-filter-btn-return, .btn-gallery-layer-x").on("click",function(){$(".contact-overlay, .contact-layer, .gallery-layer").fadeOut(300)}),$(".btn-dealer-send-email").on("click",function(){var t=$("#contact-zip").val(),i=$("#contact-first-name").val(),a=$("#contact-last-name").val(),r=$("#contact-email").val(),l=$("input:radio[name=radio_tradein]:checked").val();if(l="tradein"==l,$(".contact-form .form-control").each(function(){""==$.trim($(this).val())?$(this).addClass("form-error"):$(this).removeClass("form-error")}),""==$.trim(r)||0==validateEmail(r)?$("#contact-email").addClass("form-error"):$("#contact-email").removeClass("form-error"),$(".contact-form").find(".form-error").length>0)return!1;var s=$(".vdt-title").attr("data-year"),n=$(".vdt-title").attr("data-dealerid"),o=$(".vdt-title").attr("data-vin"),d=angular.element($("#my-map-scope")).scope(),c=d.myCar,u=c.dealer,h=u.address+" "+u.city+", "+u.state+" "+u.zip,f={FirstName:i,LastName:a,ZipCode:t,Email:r,ModelYear:s,ModelMake:"Honda",ModelMarketingName:c.groupName,DealerName:u.name,DealerAddress:h,DealerPhone:u.phone,VehicleImage:c.photo,ModelTrim:c.trimName,ModelPrice:c.dsrp,Model:{modelId:null,modelGroupName:null,modelYearStart:0,modelYearEnd:0,ModelBaseColor:null,modelInteriorColorCd:null,modelPriceLimit:0,modelTransmission:null,modelVin:o,modelMileage:0},Dealer:{dealerId:n},CarToTradeIn:l};$.post("/handlers/submit-dealer-request-handler.ashx",{dealerRequest:JSON.stringify(f)},function(t){if(t=JSON.parse(t),t=t.Output,"submitted"==t.Results.Status.toLowerCase()){$(".contact-box").first().fadeOut(300),$(".contact-thankyou-name").html(i),$(".contact-thankyou").fadeIn(300),callFloodlight("contact-dealer");var a=$(".contact-layer-dealer-name").html();_satellite.setVar("dealername",a),_satellite.track("invsearch_results_compare_send")}else console.log("Data was not submitted!"),e.showGlobalErrorMSG("contact"),$(".contact-box-btn-x").click()}).fail(function(){e.showGlobalErrorMSG("contact"),$(".contact-box-btn-x").click()})})}},{key:"initEmailAlertLayer",value:function(e){$(".filter-btn-create-alert, .no-result-btn-create-alert, .filter-nav-create-alert-btn").on("click",function(e){e.stopPropagation(),e.preventDefault(),$(".alert-filter-item").not(":first").remove(),$(".filters").find(".slider").each(function(){var e=$(this).attr("data-filter-type"),t=$(this).slider("value");"year"==e&&(t=$(this).slider("values",0)+" - "+$(this).slider("values",1)),"price"==e&&"30000"==t&&(t+="+");var i=$(".alert-filter-item").first().clone();$(i).find(".alert-filter-type").html(e),$(i).find(".alert-filter-value").attr("filter-type",e).attr("data-value",t).html(t),$(".alert-filters").append(i)}),$(".filter-values").each(function(e){var t=$(".alert-filter-item").first().clone(),i=$(this).attr("data-filter-name"),a=$(this).attr("data-values");if(""==$.trim(a))a="none";else{if($(t).find(".alert-filter-type").html(i),$(t).find(".alert-filter-value").attr("filter-type",i).attr("data-value",a).html(a),"dealer"==i){for(var r=a.split(", "),l=new Array,e=0;e<r.length;e++)l.push($("#filter-dealers .filter-value-active[data-value='"+r[e]+"']").attr("data-display-value"));$(t).find(".alert-filter-value").html(l.join(", "))}$(".alert-filters").append(t)}}),$(".alert-filter-item").first().hide(),$(".alert-filter-item").not(":first").show(),$(".alert-thankyou").hide(),$(".alert-box").first().fadeIn(300),$(".alert-overlay, .alert-layer").fadeIn(300),_satellite.track("invsearch_filter_alert_start")}),$(".alert-box-btn-x, .alert-filter-btn-edit, .alert-filter-btn-return").on("click",function(){$(".alert-overlay, .alert-layer").fadeOut(300)}),$(".alert-form-btn-create-alert").on("click",function(){var t=$(".itt-zip").html(),i=$(".itt-radius").html(),a=$("#alert-name").val(),r=$("#alert-first-name").val(),l=$("#alert-last-name").val(),s=$("#alert-email").val(),n=$("input:radio[name=radio_frequency]:checked").val(),o=$("input:radio[name=radio_duration]:checked").val();if($(".frequency-options p.option").hide(),"0"==n?$(".frequency-options p.option").eq(0).show():$(".frequency-options p.option").eq(1).show(),$(".alert-form .form-control").each(function(){""==$.trim($(this).val())?$(this).addClass("form-error"):$(this).removeClass("form-error")}),""==$.trim(s)||0==validateEmail(s)?$("#alert-email").addClass("form-error"):$("#alert-email").removeClass("form-error"),$(".alert-form").find(".form-error").length>0)return!1;var d=$(".alert-filter-value[filter-type='offers']").attr("data-value");d="on"==d;var c={customerInfo:{FirstName:r,LastName:l,Email:s,Phone:null},preference:{DeliveryFrequency:parseInt(n),DeliveryDuration:parseInt(o)},searchRange:parseInt(i),CustomerZipCode:t,modelOffers:d,models:[],numberOfDealers:0,alertName:a},u="";if(null!=(u=$(".alert-filter-value[filter-type='styles']").attr("data-value"))){var h=u.split(", ");h.length>0&&(c.modelBodyStyles=new Array);for(var f=0;f<h.length;f++)c.modelBodyStyles.push(h[f])}if(null!=(u=$(".alert-filter-value[filter-type='dealer']").attr("data-value"))){var h=u.split(", ");h.length>0&&(c.dealers=new Array);for(var f=0;f<h.length;f++)c.dealers.push({dealerId:h[f]});c.numberOfDealers=h.length}else c.numberOfDealers=e.dealersArray.length;if(null!=(u=$(".alert-filter-value[filter-type='transmission']").attr("data-value"))){var h=u.split(", ");h.length>0&&(c.modelAttributes=new Array);for(var f=0;f<h.length;f++)c.modelAttributes.push({Key:"TRANS",Value:h[f]})}var v=$("#filter-features .filter-value-active");v.length>0&&(void 0==c.modelAttributes&&(c.modelAttributes=new Array),$(v).each(function(){"INTERIOR MATERIAL"==$(this).attr("data-value2")?c.modelAttributes.push({Key:$(this).attr("data-value2"),Value:"LEATHER"}):c.modelAttributes.push({Key:$(this).attr("data-value2"),Value:"True"})})),u=$(".alert-filter-value[filter-type='year']").attr("data-value");var m=u.split(" - ");u=$(".alert-filter-value[filter-type='price']").attr("data-value");var p=u;"30000"!=p&&"30000+"!=p||(p=null),u=$(".alert-filter-value[filter-type='mileage']").attr("data-value");var y=u;"80000"==y&&(y=null),u=$(".alert-filter-value[filter-type='exterior']").attr("data-value");var g=new Array;$("#filter-excolor .filter-value-active").each(function(){g.push($(this).attr("data-value2"))}),g.length<=0&&(g=[null]),u=$(".alert-filter-value[filter-type='interior']").attr("data-value");var b=new Array;$("#filter-incolor .filter-value-active").each(function(){b.push($(this).attr("data-value2"))}),b.length<=0&&(b=[null]),u=$(".alert-filter-value[filter-type='vehicle']").attr("data-value");var w=new Array,C=new Array;new Array,new Array;if(null!=u)for(var h=u.split(", "),f=0;f<h.length;f++){var x={modelId:null,modelGroupName:h[f],modelYearStart:parseInt(m[0]),modelYearEnd:parseInt(m[1]),ModelBaseColor:null,modelInteriorColorCd:null,modelTransmission:null,modelVin:null};null!=p&&(x.modelPriceLimit=p),null!=y&&(x.modelMileage=y),w.push(x)}else{var x={modelId:null,modelGroupName:null,modelYearStart:parseInt(m[0]),modelYearEnd:parseInt(m[1]),ModelBaseColor:null,modelInteriorColorCd:null,modelTransmission:null,modelVin:null};null!=p&&(x.modelPriceLimit=p),null!=y&&(x.modelMileage=y),w.push(x)}for(var f=0;f<w.length;f++)for(var M=0;M<g.length;M++)for(var k=0;k<b.length;k++){var S=JSON.parse(JSON.stringify(w[f]));S.ModelBaseColor=g[M],S.modelInteriorColorCd=b[k];C.push(S)}c.models=C;$.post("/handlers/inventory-alerts-signup-handler.ashx",{requestFilter:JSON.stringify(c)}).done(function(e){$(".alert-box").first().fadeOut(300),$(".alert-thankyou-email").html(s),$(".alert-thankyou-duration").html(o),$(".alert-thankyou-name").html(a),$(".alert-thankyou").fadeIn(300),$("#alert-name").val(""),callFloodlight("create-alert"),_satellite.track("invsearch_filter_alert_create")}).fail(function(t){if(400===t.status){var i=JSON.parse(t.responseText);if(i&&i.SignupResponse&&!i.SignupResponse.Success&&i.SignupResponse.Errors.some(function(e){return"InvalidEmail"===e["@error_number"]}))return void $("#alert-email").addClass("form-error")}console.log("Alert was not created!"),e.showGlobalErrorMSG("alert"),$(".alert-box-btn-x").click()})})}},{key:"initCompareMiniLayer",value:function(e){}},{key:"initFiltersLayer",value:function(e){$(".filter-nav-control").on("click",function(){e.showFilterDiv()}),$(".filter-nav-control-x, .filter-btn-cancel, .filter-btn-create").on("click",function(e){e.stopPropagation(),e.preventDefault(),$(".filter-nav").removeClass("filter-nav-active"),$(".filters").removeClass("filters-active"),$(".filters-outer").hide(300),$(".map-list").removeClass("map-list-push-over"),$(".mini-compare-bar").removeClass("super-mini"),$(".list-items").removeClass("list-items-3")}),$(".filters-clearall-btn").click(function(){var t=$("#slider-year").slider("option");$("#slider-year").slider("values",[t.min,t.max]),$(".slider").each(function(){var t=$(this).slider("option");"slider-radius"==$(this).attr("id")?$(this).slider("value",[e.radiusMiles]):$(this).slider("value",[t.max])}),$(".filter-value-txt").html(""),$(".filter").attr("data-filter","false"),$(".filter-values").attr("data-values",""),$(".filter-value").removeClass("filter-value-active"),$(".fos-box").removeClass("fos-box-on"),$(".fos-onoff").removeClass("fos-active"),$(".fos-off").addClass("fos-active");$(".fos-box").parents(".filter").find(".filter-values").attr("data-values","off"),$(".fos-box").parents(".filter").find(".filter-value-txt").html("off"),e.filter1=null,e.filter2=null,localStorageSetItemCommon("filter1",""),localStorageSetItemCommon("filter2",""),localStorageSetItemCommon("lastRadius",e.radiusMiles),e.updateFilterCount(),e.lastRadius=e.radiusMiles,e.initMap(5)}),$(".slider").on("slidestop",function(t,i){var a=$(this).slider("option");if("year"==$(this).attr("data-filter-type")?a.values[0]!=a.min||a.values[1]!=a.max?$(this).parents(".filter").attr("data-filter","true"):$(this).parents(".filter").attr("data-filter","false"):$(this).parents(".filter").attr("data-filter","true"),e.updateFilterCount(),"radius"==$(this).attr("data-filter-type"))e.lastRadius=a.value,e.initMap(3);else{var r=e.applyMultiFilters();e.initFilterUI(r,e.dealersArray,null,!0,null)}}),$(".filter").on("click",".filter-value",function(){var t=$(this).attr("data-value").trim();if((!$(this).hasClass("filter-seats")||$("#a"+t).is(":checked"))&&!$(this).hasClass("filter-value-disabled")){$(this).toggleClass("filter-value-active");var i="",a="";$(this).parents(".filter").find(".filter-value-active").each(function(e){void 0!=$(this).attr("data-value")&&(a+=$(this).attr("data-value")+", "),void 0!=$(this).attr("data-display-value")?i+=$(this).attr("data-display-value")+", ":i+=$(this).html()+", "});var r="applied",l=i.split(", ").length-1;l<=0&&(r="",l=""),$(this).hasClass("filter-seats")||$(this).parents(".filter").find(".filter-value-txt").html(l+" "+r),""!=a&&(i=a),$(this).parents(".filter").find(".filter-values").attr("data-values",i.substr(0,i.length-2));var s=e.getParameterByName("style"),n=e.getParameterByName("modelgroupname"),o=$(this).parents(".filter-values").attr("id");void 0!=s&&1==e.firstAutoFilter||"filter-program"==o&&e.satelliteTrack("type"),void 0!=s&&1==e.firstAutoFilter||"filter-type"==o&&e.satelliteTrack("type"),void 0!=n&&1==e.firstAutoFilter||"filter-vehicle"==o&&e.satelliteTrack("vehicle"),void 0!=n&&1==e.firstAutoFilter||"filter-model"==o&&e.satelliteTrack("model"),void 0!=n&&1==e.firstAutoFilter||"filter-transmission"==o&&e.satelliteTrack("transmission"),void 0!=n&&1==e.firstAutoFilter||"filter-seat"==o&&e.satelliteTrack("seating"),void 0!=n&&1==e.firstAutoFilter||"filter-excolor"==o&&e.satelliteTrack("color_ext"),void 0!=n&&1==e.firstAutoFilter||"filter-incolor"==o&&e.satelliteTrack("color_int"),void 0!=n&&1==e.firstAutoFilter||"filter-dealers"==o&&e.satelliteTrack("dealers"),void 0!=n&&1==e.firstAutoFilter||"filter-features"==o&&e.satelliteTrack("features"),e.updateFilterCount();var d=e.applyMultiFilters(),c=new Array;if($(".filter-values").each(function(){var e=$(this).attr("data-filter-type"),t=$(this).attr("data-values");"seats"==e&&c.push({"@Code":"# of Passengers","@Value":t})}),e.initFilterUI(d,e.dealersArray,$(this).parents(".filter-values").attr("id"),!0,c),$(this).hasClass("filter-value-active")&&"filter-vehicle"==o){var u=$(this).attr("data-value");callFloodlight("inventory-search-results",u)}$(this).hasClass("filter-seats")&&$(this).removeClass("filter-value-active")}}),$(".filter").on("click",".filter-name-2",function(){$(this).hasClass("filter-expand")?$(this).parents(".filter").find(".filter-values").hide(300):$(this).parents(".filter").find(".filter-values").show(300),$(this).toggleClass("filter-expand")}),$(".fos-box").on("click",function(){e.satelliteTrack("offers"),$(this).toggleClass("fos-box-on"),$(".fos-onoff").toggleClass("fos-active");var t=$(this).parents(".filter").find(".filter-values"),i=$(t).attr("data-values");i="on"==i?"off":"on",$(t).attr("data-values",i),$(this).parents(".filter").find(".filter-value-txt").html(i),e.updateFilterCount();var a=e.applyMultiFilters();e.initFilterUI(a,e.dealersArray,null,!0,null)}),$(".filter-nav-sortby-btn").click(function(){$(".filter-nav-sortby-inner").slideDown(300)}),$(".fnsb-item").click(function(){$(".filter-nav-sortby-btn").html($(this).html()),$(".filter-nav-sortby-inner").slideUp(300)})}},{key:"initGeneral",value:function(e){$(".filter-nav-list-view-button").click(function(){$("#list").fadeIn(300),$(this).hide(),$(".filter-nav-sortby").show(),$(".filter-nav-map-view-button").show(),$(".filter-nav").removeClass("filter-nav-map-active")}),$(".filter-nav-map-view-button").click(function(){$("#list").fadeOut(300),$(this).hide(),$(".filter-nav-sortby").hide(),$(".filter-nav-list-view-button").show(),$(".filter-nav").addClass("filter-nav-map-active")}),$(".list-items").on("click",".list-car-map-btn",function(){var e=$(".inventory-main").position();$("html, body").animate({scrollTop:e.top}),$(".map-list").css("height","auto"),$("#list").fadeOut(300),$(".filter-nav-list-view-button").show(),$(".filter-nav-map-view-button").hide(),$(".filter-nav-sortby-mobile").hide()}),$(".map-list-view-btn").click(function(){$("#list").fadeIn(300),$(".filter-nav-list-view-button").hide(),$(".filter-nav-map-view-button").show(),$(".filter-nav-sortby-mobile").show()}),$("#search-map-move").click(function(){}),$(".btn-redo-search-map").click(function(){$("#search-map-move").prop("checked",!0),e.initMap(2),$(".map-search-when-move .radio-box").toggle()}),$("#map-page-content").on("click",".list-item-inner-wrapper",function(){localStorageSetItemCommon("filter1",JSON.stringify(e.filter1)),localStorageSetItemCommon("filter2",JSON.stringify(e.filter2));var t=$(this).find(".list-car-btn-detail").attr("data-year"),i=$(this).find(".list-car-btn-detail").attr("data-name");callFloodlight("inventory-search-details",i,t),_satellite.track("invsearch_results_list_details");var a=$(this).find(".list-car-btn-detail").attr("data-url");window.location=a}),$("#map-page-content").on("click",".list-car-btn-detail",function(){var e=$(this).attr("data-url");window.location=e}),$(window).on("scroll",function(e){var t=$(this).scrollTop();t>900?$(".btn-back-to-top").show():$(".btn-back-to-top").hide(),t>$(".filter-nav-outer").offset().top-$(".navbar").height()?$(".filter-nav").addClass("pfixed"):$(".filter-nav").removeClass("pfixed"),t>$(".main-content").offset().top-$(".navbar").height()-$(".filter-nav").height()?$(".filters-active").addClass("pfixed"):$(".filters-active").removeClass("pfixed"),(document.documentMode||/Edge/.test(navigator.userAgent)||/android/.test(navigator.userAgent)||/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream)&&($(".compare-content").hasClass("fixed")||(t>$(".main-content").offset().top-$(".navbar").height()-$(".filter-nav").height()?($(".mini-compare-bar").addClass("pfixed"),$(".mini-compare-bar").hasClass("super-mini")&&$(".mini-compare-bar").addClass("super-mini-ie")):($(".mini-compare-bar").removeClass("pfixed"),$(".mini-compare-bar").removeClass("super-mini-ie"))))})}},{key:"applyMultiFilters",value:function(){var e=new Array;if("true"==$("#slider-price").parents(".filter").attr("data-filter")){var t=$("#slider-price").slider("option","value");t==$("#slider-price").slider("option","max")&&(t=3e4),e.push({filter:"dsrp",min:0,max:t})}if("true"==$("#slider-mileage").parents(".filter").attr("data-filter")){var t=$("#slider-mileage").slider("option","value");t==$("#slider-mileage").slider("option","max")&&(t=99999),e.push({filter:"mileage",min:0,max:t})}"true"==$("#slider-year").parents(".filter").attr("data-filter")&&e.push({filter:"year",min:$("#slider-year").slider("values",0),max:$("#slider-year").slider("values",1)});var i=new Array;$(".filter-values").each(function(){var e=$(this).attr("data-filter-type"),t=$(this).attr("data-values");""!=t&&i.push({filter:e,values:t})});var a=this.currentCars;this.filter1=e,this.filter2=i;for(var r=0;r<e.length;r++){var l=e[r],s=[];angular.forEach(a,function(e){e[l.filter]>=l.min&&e[l.filter]<=l.max&&-1==this.findObjectIndexByProperty(s,"vin",e.vin)&&s.push(e)}.bind(this)),a=s}for(var r=0;r<i.length;r++){var l=i[r];if("offers"!=l.filter||"off"!=l.values){var s=[];angular.forEach(a,function(e){for(var t=0,i=l.values.split(", "),a=0;a<i.length;a++)if("styles"==l.filter){if(null!=e.styles)for(var r=0;r<e.styles.BodyStyle.length;r++)if(this.bodyStylesObj.getStyleNameById2(e.styles.BodyStyle[r])==$.trim(i[a])&&-1==this.findObjectIndexByProperty(s,"vin",e.vin)){s.push(e);break}}else if("features"==l.filter){if(null!=e.features)for(var r=0;r<e.features.length;r++)if(e.features[r]==$.trim(i[a])){t++;break}}else e[l.filter]==$.trim(i[a])&&-1==this.findObjectIndexByProperty(s,"vin",e.vin)&&s.push(e);"features"==l.filter&&t==i.length&&-1==this.findObjectIndexByProperty(s,"vin",e.vin)&&s.push(e),"seats"==l.filter&&e.seating==i[0]&&-1==this.findObjectIndexByProperty(s,"vin",e.vin)&&s.push(e)}.bind(this)),a=s}}return this.applyData(a),this.initMap(1,a),a.length<=0?$(".list-no-result").fadeIn(300):$(".list-no-result").hide(),a}},{key:"showGlobalErrorMSG",value:function(e){var t="We are sorry, we are experiencing some server error.";"alert"==e?t="Sorry about that! It seems that our alerts feature isn’t working the way it should, but you can be sure we’re working on getting it back up and running. Please check back in a bit.":"contact"==e?t="Sorry about that! It seems that the dealer email features isn’t working the way it should, but you can be sure we’re working on getting it back up and running. Please check back in a bit.":"inventory"==e&&(t="Sorry about that! It seems that Inventory Search isn’t working the way it should, but you can be sure we’re working on getting it back up and running. Please check back in a bit."),allError.setMessage({msg:t,closeButton:!0,template:"A"})}},{key:"showHideLoadMoreButton",value:function(e){var t=angular.element($("#my-map-scope")).scope();e.length>t.cStep?$(".btn-load-more").show():$(".btn-load-more").hide()}},{key:"resetLoadMoreStep",value:function(){var e=angular.element($("#my-map-scope")).scope();e.cStep=e.step}}]),e}();$(".compare-btn-ready").on("click",function(){function e(e,t,i,a){function r(e,t){if(i)for(var a,r,l=0;l<i.length;l++)if(i[l].DealerID==e){if(a=i[l].DealerName,r=i[l].DealerDistance,"dealerName"==t)return a;if("dealerDistance"==t)return r}}for(var l=new Array,s=e,n=t.BodyStyles.BodyStyle[0]["@Name"],o=t.ModelAttributes.ModelAttribute,d=0;d<s.length;d++)for(var c=s[d],u=0;u<c.ModelVINsOnSite.VIN.length;u++){var h=c.ModelVINsOnSite.VIN[u].VIN,f=c.ModelVINsOnSite.VIN[u].StockNo,v=c["@DealerId"],m=r(v,"dealerName"),p=r(v,"dealerDistance"),y=c["@ModelId"],g=c.ModelYear,b=c.ModelGroupName,w=c.ModelTrim,C=c.ModelMarketingName,x=c.ModelTransmission,M=c.ModelTransmissionMarketingName,k=c.ModelMSRP,S=parseInt(c.ModelVINsOnSite.VIN[u].Mileage),I=parseFloat(c.ModelVINsOnSite.VIN[u].DSRP),P=new Date(c.ModelVINsOnSite.VIN[u].CertDate),T=c.ModelVINsOnSite.VIN[u].CPOTier,A=c.ModelVINsOnSite.VIN[u].ModelExteriorColorName,O=c.ModelVINsOnSite.VIN[u].ModelBaseColor,N=c.ModelVINsOnSite.VIN[u].ModelInteriorColorName,D=c.ModelVINsOnSite.VIN[u].Photos,E=c.ModelVINsOnSite.VIN[u].ModelStockPhotos,_=n,L=null;void 0!=c.ModelAttributes&&(L=c.ModelAttributes.ModelAttribute);var V=c.Specials;if(void 0!=V&&void 0!=a&&1==V["@Count"])for(var B,R,F=a.Special,j=V.Special[0]["@id"],z=0;z<F.length;z++)F[z]["@id"]==j&&(void 0!=F[z].PaymentTerms.FinanceTerms.FinanceTerm?(B=F[z].PaymentTerms.FinanceTerms.FinanceTerm[0].APR,R=F[z].PaymentTerms.FinanceTerms.FinanceTerm[0].TermMin):B=F[z].PaymentTerms.FinanceTerms.SampleFinancePayment.SampleAPR);var Y=c.ModelVINsOnSite.VIN[u].ModelInteriorColorCD,G=c.ModelVINsOnSite.VIN[u].ModelBaseColor,q=c.EngineName,X=c.ModelVINsOnSite.VIN[u].VHRUrl,H=c.ModelVINsOnSite.VIN[u].ICEUrl,U=new hcpv_car(h,f,v,m,p,y,g,b,w,C,x,M,k,S,I,P,O,T,A,N,D,E,_,L,V,B,R,Y,G,q,X,H);U.generateMpgAttributes(o),l.push(U);var Z=angular.element($(".save-compare-scope")).scope();Z.$apply(function(){Z.compareCarList=l,Z.saveCarList=l})}}if("compareList"==$(this).data("id")){if($("#compareVehicleCount").text()<2)return;if($(".compare-overlay .compare-main-inner").css("overflow-y","hidden"),$(this).parents().eq(3).hasClass("compare-main-inner"))return;$(".tmp-honda-loader").fadeIn(300),setTimeout(function(){if($(".vehicle-details-content").hide(),$(".inventory-main").hide(),$("html, body").animate({scrollTop:"0px"}),$(".compare-overlay").show(300),$(".compare-main-inner").show(),$("#saveBanner, #save-no-result-message").hide(),$(".compare-content-box").find(".list-car-btn-compare").addClass("list-car-btn-compare-active"),$(".tmp-honda-loader").fadeOut(300),Cookies.get("saved_vehicle"))for(var e=Cookies.get("saved_vehicle").split(";"),t=0;t<e.length;t++){var i=e[t];$(".compare-overlay .compare-main-inner .compare-content-box[data-vin='"+i+"']").find(".list-car-btn-save").addClass("list-car-btn-save-active")}},2e3),1==$(this).parents(".compare-overlay").find(".save-main-inner").length&&($(".tmp-honda-loader-overlay").fadeIn("fast",function(){$(".tmp-honda-loader-overlay").delay(2e3).fadeOut(300)}),$("#compareBanner").show(),$(".save-main-inner, #saveBanner").hide()),callFloodlight("ready-to-compare"),_satellite.track("invsearch_results_list_ready");var t=Cookies.get("compare_vehicle").split(";"),i=t.join("|"),a=localStorageGetItemCommon("_GeoCurrentZipCode"),r="/handlers/get-Compare-save.ashx?vins="+i+"&zip="+a;$.ajax({url:r,dataType:"json"}).done(function(t){e(t.Output.Results.Models.Model,t.Output.Results,t.Output.Results.Dealers.Dealer,null)});var l=$(".compare-box").length;if($(".compare-content-box, .compare-content-box2, .compare-content-spec-box").removeClass("col-sm-offset-three").removeClass("col-sm-offset-1half"),$(".compare-content-top").removeClass("cct-2").removeClass("cct-3"),2==l?($(".compare-content-box").eq(0).addClass("col-sm-offset-three"),$(".compare-content-box2").eq(0).addClass("col-sm-offset-three"),$(".compare-content-spec-box").eq(0).addClass("col-sm-offset-three"),$(".compare-content-top").addClass("cct-2")):3==l&&($(".compare-content-box").eq(0).addClass("col-sm-offset-1half"),$(".compare-content-box2").eq(0).addClass("col-sm-offset-1half"),$(".compare-content-spec-box").eq(0).addClass("col-sm-offset-1half"),$(".compare-content-top").addClass("cct-3")),$(".compare-overlay").length){for(var s=$(".ccs-row").length/l,n=0;n<s;n++){for(var o=0,d=0;d<l;d++)$(".ccs-row").eq(n+d*s).height()>o&&(o=$(".ccs-row").eq(n+d*s).height());for(var d=0;d<l;d++)$(".ccs-row").eq(n+d*s).height(o)}s=$(".ccb-row").length/l;for(var n=0;n<s;n++){for(var o=0,d=0;d<l;d++)$(".ccb-row").eq(n+d*s).height()>o&&(o=$(".ccb-row").eq(n+d*s).height());for(var d=0;d<l;d++)$(".ccb-row").eq(n+d*s).height(o)}new IScroll(".compare-main-inner",{eventPassthrough:!0,scrollX:!0,scrollY:!0,preventDefault:!1})}}else{if(0==$("#saveVehicleCount").text())return;if($(".compare-overlay").removeClass("compare-fixed"),$(this).parents().eq(3).hasClass("save-main-inner"))return;var c=Cookies.get("saved_vehicle").split(";"),u=c.join("|"),a=localStorageGetItemCommon("_GeoCurrentZipCode"),r="/handlers/get-Compare-save.ashx?vins="+u+"&zip="+a;$.ajax({url:r,dataType:"json"}).done(function(t){var i=t.Output.Results.Models.Model,a=t.Output.Results,r=t.Output.Results.Specials;e(i,a,t.Output.Results.Dealers.Dealer,r)}),$(".tmp-honda-loader").fadeIn(300),setTimeout(function(){if($(".vehicle-details-content").hide(),$(".inventory-main").hide(),$("html, body").animate({scrollTop:"0px"}),$(".compare-overlay").show(300),$(".save-main-inner").show(),$("#compareBanner, #compare-no-result-message").hide(),$(".tmp-honda-loader").fadeOut(300),Cookies.get("compare_vehicle"))for(var e=Cookies.get("compare_vehicle").split(";"),t=0;t<e.length;t++){var i=e[t];$(".compare-overlay .save-main-inner .list-item[data-vin='"+i+"']").find(".list-car-btn-compare").addClass("list-car-btn-compare-active")}},2e3),1==$(this).parents(".compare-overlay").find(".compare-main-inner").length&&($(".tmp-honda-loader-overlay").fadeIn("fast",function(){$(".tmp-honda-loader-overlay").delay(2e3).fadeOut(300)}),$("#saveBanner").show(),$(".compare-main-inner, #compareBanner").hide())}}),$(".compare-btn-back-to-result, .vdp-btn-back-to-result, .back-to-result").on("click",function(){$(".compare-overlay, .save-main-inner, .compare-main-inner, #save-no-result-message, #compare-no-result-message").hide(300),$(".inventory-main").show(),$(".vehicle-details-content").show(),$("#compareBanner, #saveBanner").show(300)}),$(".btn-back-to-top").on("click",function(){$("html, body").animate({scrollTop:"0px"})}),$(".btn-back-to-top:visible")&&$(".btn-back-to-top, .list-car-map-btn").addClass("btn-back-to-top-push"),function(e){(jQuery.browser=jQuery.browser||{}).mobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|android|ipad|playbook|silk|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}(navigator.userAgent||navigator.vendor||window.opera),function(e,t,i){function a(e,i){this.wrapper="string"==typeof e?t.querySelector(e):e,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0};for(var a in i)this.options[a]=i[a];this.translateZ=this.options.HWCompositing&&l.hasPerspective?" translateZ(0)":"",this.options.useTransition=l.hasTransition&&this.options.useTransition,
this.options.useTransform=l.hasTransform&&this.options.useTransform,this.options.eventPassthrough=!0===this.options.eventPassthrough?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY="vertical"!=this.options.eventPassthrough&&this.options.scrollY,this.options.scrollX="horizontal"!=this.options.eventPassthrough&&this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing="string"==typeof this.options.bounceEasing?l.ease[this.options.bounceEasing]||l.ease.circular:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,!0===this.options.tap&&(this.options.tap="tap"),this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}var r=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)},l=function(){function a(e){return!1!==s&&(""===s?e:s+e.charAt(0).toUpperCase()+e.substr(1))}var r={},l=t.createElement("div").style,s=function(){for(var e=["t","webkitT","MozT","msT","OT"],t=0,i=e.length;t<i;t++)if(e[t]+"ransform"in l)return e[t].substr(0,e[t].length-1);return!1}();r.getTime=Date.now||function(){return(new Date).getTime()},r.extend=function(e,t){for(var i in t)e[i]=t[i]},r.addEvent=function(e,t,i,a){e.addEventListener(t,i,!!a)},r.removeEvent=function(e,t,i,a){e.removeEventListener(t,i,!!a)},r.prefixPointerEvent=function(t){return e.MSPointerEvent?"MSPointer"+t.charAt(9).toUpperCase()+t.substr(10):t},r.momentum=function(e,t,a,r,l,s){var n,o,d=e-t,c=i.abs(d)/a;return s=void 0===s?6e-4:s,n=e+c*c/(2*s)*(d<0?-1:1),o=c/s,n<r?(n=l?r-l/2.5*(c/8):r,d=i.abs(n-e),o=d/c):n>0&&(n=l?l/2.5*(c/8):0,d=i.abs(e)+n,o=d/c),{destination:i.round(n),duration:o}};var n=a("transform");return r.extend(r,{hasTransform:!1!==n,hasPerspective:a("perspective")in l,hasTouch:"ontouchstart"in e,hasPointer:e.PointerEvent||e.MSPointerEvent,hasTransition:a("transition")in l}),r.isBadAndroid=/Android /.test(e.navigator.appVersion)&&!/Chrome\/\d/.test(e.navigator.appVersion),r.extend(r.style={},{transform:n,transitionTimingFunction:a("transitionTimingFunction"),transitionDuration:a("transitionDuration"),transitionDelay:a("transitionDelay"),transformOrigin:a("transformOrigin")}),r.hasClass=function(e,t){return new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},r.addClass=function(e,t){if(!r.hasClass(e,t)){var i=e.className.split(" ");i.push(t),e.className=i.join(" ")}},r.removeClass=function(e,t){if(r.hasClass(e,t)){var i=new RegExp("(^|\\s)"+t+"(\\s|$)","g");e.className=e.className.replace(i," ")}},r.offset=function(e){for(var t=-e.offsetLeft,i=-e.offsetTop;e=e.offsetParent;)t-=e.offsetLeft,i-=e.offsetTop;return{left:t,top:i}},r.preventDefaultException=function(e,t){for(var i in t)if(t[i].test(e[i]))return!0;return!1},r.extend(r.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),r.extend(r.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(e){return e*(2-e)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(e){return i.sqrt(1- --e*e)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(e){return(e-=1)*e*(5*e+4)+1}},bounce:{style:"",fn:function(e){return(e/=1)<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}},elastic:{style:"",fn:function(e){return 0===e?0:1==e?1:.4*i.pow(2,-10*e)*i.sin((e-.055)*(2*i.PI)/.22)+1}}}),r.tap=function(e,i){var a=t.createEvent("Event");a.initEvent(i,!0,!0),a.pageX=e.pageX,a.pageY=e.pageY,e.target.dispatchEvent(a)},r.click=function(e){var i,a=e.target;/(SELECT|INPUT|TEXTAREA)/i.test(a.tagName)||(i=t.createEvent("MouseEvents"),i.initMouseEvent("click",!0,!0,e.view,1,a.screenX,a.screenY,a.clientX,a.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null),i._constructed=!0,a.dispatchEvent(i))},r}();a.prototype={version:"5.1.3",_init:function(){this._initEvents()},destroy:function(){this._initEvents(!0),this._execEvent("destroy")},_transitionEnd:function(e){e.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd")))},_start:function(e){if((1==l.eventType[e.type]||0===e.button)&&this.enabled&&(!this.initiated||l.eventType[e.type]===this.initiated)){!this.options.preventDefault||l.isBadAndroid||l.preventDefaultException(e.target,this.options.preventDefaultException)||e.preventDefault();var t,a=e.touches?e.touches[0]:e;this.initiated=l.eventType[e.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this._transitionTime(),this.startTime=l.getTime(),this.options.useTransition&&this.isInTransition?(this.isInTransition=!1,t=this.getComputedPosition(),this._translate(i.round(t.x),i.round(t.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=a.pageX,this.pointY=a.pageY,this._execEvent("beforeScrollStart")}},_move:function(e){if(this.enabled&&l.eventType[e.type]===this.initiated){this.options.preventDefault&&e.preventDefault();var t,a,r,s,n=e.touches?e.touches[0]:e,o=n.pageX-this.pointX,d=n.pageY-this.pointY,c=l.getTime();if(this.pointX=n.pageX,this.pointY=n.pageY,this.distX+=o,this.distY+=d,r=i.abs(this.distX),s=i.abs(this.distY),!(c-this.endTime>300&&r<10&&s<10)){if(this.directionLocked||this.options.freeScroll||(r>s+this.options.directionLockThreshold?this.directionLocked="h":s>=r+this.options.directionLockThreshold?this.directionLocked="v":this.directionLocked="n"),"h"==this.directionLocked){if("vertical"==this.options.eventPassthrough)e.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);d=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)e.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);o=0}o=this.hasHorizontalScroll?o:0,d=this.hasVerticalScroll?d:0,t=this.x+o,a=this.y+d,(t>0||t<this.maxScrollX)&&(t=this.options.bounce?this.x+o/3:t>0?0:this.maxScrollX),(a>0||a<this.maxScrollY)&&(a=this.options.bounce?this.y+d/3:a>0?0:this.maxScrollY),this.directionX=o>0?-1:o<0?1:0,this.directionY=d>0?-1:d<0?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(t,a),c-this.startTime>300&&(this.startTime=c,this.startX=this.x,this.startY=this.y)}}},_end:function(e){if(this.enabled&&l.eventType[e.type]===this.initiated){this.options.preventDefault&&!l.preventDefaultException(e.target,this.options.preventDefaultException)&&e.preventDefault();var t,a,r=(e.changedTouches&&e.changedTouches[0],l.getTime()-this.startTime),s=i.round(this.x),n=i.round(this.y),o=i.abs(s-this.startX),d=i.abs(n-this.startY),c=0,u="";if(this.isInTransition=0,this.initiated=0,this.endTime=l.getTime(),!this.resetPosition(this.options.bounceTime)){if(this.scrollTo(s,n),!this.moved)return this.options.tap&&l.tap(e,this.options.tap),this.options.click&&l.click(e),void this._execEvent("scrollCancel");if(this._events.flick&&r<200&&o<100&&d<100)return void this._execEvent("flick");if(this.options.momentum&&r<300&&(t=this.hasHorizontalScroll?l.momentum(this.x,this.startX,r,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:s,duration:0},a=this.hasVerticalScroll?l.momentum(this.y,this.startY,r,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:n,duration:0},s=t.destination,n=a.destination,c=i.max(t.duration,a.duration),this.isInTransition=1),s!=this.x||n!=this.y)return(s>0||s<this.maxScrollX||n>0||n<this.maxScrollY)&&(u=l.ease.quadratic),void this.scrollTo(s,n,c,u);this._execEvent("scrollEnd")}}},_resize:function(){var e=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){e.refresh()},this.options.resizePolling)},resetPosition:function(e){var t=this.x,i=this.y;return e=e||0,!this.hasHorizontalScroll||this.x>0?t=0:this.x<this.maxScrollX&&(t=this.maxScrollX),!this.hasVerticalScroll||this.y>0?i=0:this.y<this.maxScrollY&&(i=this.maxScrollY),(t!=this.x||i!=this.y)&&(this.scrollTo(t,i,e,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=this.scroller.offsetWidth,this.scrollerHeight=this.scroller.offsetHeight,this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=l.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition()},on:function(e,t){this._events[e]||(this._events[e]=[]),this._events[e].push(t)},off:function(e,t){if(this._events[e]){var i=this._events[e].indexOf(t);i>-1&&this._events[e].splice(i,1)}},_execEvent:function(e){if(this._events[e]){var t=0,i=this._events[e].length;if(i)for(;t<i;t++)this._events[e][t].apply(this,[].slice.call(arguments,1))}},scrollBy:function(e,t,i,a){e=this.x+e,t=this.y+t,i=i||0,this.scrollTo(e,t,i,a)},scrollTo:function(e,t,i,a){a=a||l.ease.circular,this.isInTransition=this.options.useTransition&&i>0,!i||this.options.useTransition&&a.style?(this._transitionTimingFunction(a.style),this._transitionTime(i),this._translate(e,t)):this._animate(e,t,i,a.fn)},scrollToElement:function(e,t,a,r,s){if(e=e.nodeType?e:this.scroller.querySelector(e)){var n=l.offset(e);n.left-=this.wrapperOffset.left,n.top-=this.wrapperOffset.top,!0===a&&(a=i.round(e.offsetWidth/2-this.wrapper.offsetWidth/2)),!0===r&&(r=i.round(e.offsetHeight/2-this.wrapper.offsetHeight/2)),n.left-=a||0,n.top-=r||0,n.left=n.left>0?0:n.left<this.maxScrollX?this.maxScrollX:n.left,n.top=n.top>0?0:n.top<this.maxScrollY?this.maxScrollY:n.top,t=void 0===t||null===t||"auto"===t?i.max(i.abs(this.x-n.left),i.abs(this.y-n.top)):t,this.scrollTo(n.left,n.top,t,s)}},_transitionTime:function(e){e=e||0,this.scrollerStyle[l.style.transitionDuration]=e+"ms",!e&&l.isBadAndroid&&(this.scrollerStyle[l.style.transitionDuration]="0.001s")},_transitionTimingFunction:function(e){this.scrollerStyle[l.style.transitionTimingFunction]=e},_translate:function(e,t){this.options.useTransform?this.scrollerStyle[l.style.transform]="translate("+e+"px,"+t+"px)"+this.translateZ:(e=i.round(e),t=i.round(t),this.scrollerStyle.left=e+"px",this.scrollerStyle.top=t+"px"),this.x=e,this.y=t},_initEvents:function(t){var i=t?l.removeEvent:l.addEvent,a=this.options.bindToWrapper?this.wrapper:e;i(e,"orientationchange",this),i(e,"resize",this),this.options.click&&i(this.wrapper,"click",this,!0),this.options.disableMouse||(i(this.wrapper,"mousedown",this),i(a,"mousemove",this),i(a,"mousecancel",this),i(a,"mouseup",this)),l.hasPointer&&!this.options.disablePointer&&(i(this.wrapper,l.prefixPointerEvent("pointerdown"),this),i(a,l.prefixPointerEvent("pointermove"),this),i(a,l.prefixPointerEvent("pointercancel"),this),i(a,l.prefixPointerEvent("pointerup"),this)),l.hasTouch&&!this.options.disableTouch&&(i(this.wrapper,"touchstart",this),i(a,"touchmove",this),i(a,"touchcancel",this),i(a,"touchend",this)),i(this.scroller,"transitionend",this),i(this.scroller,"webkitTransitionEnd",this),i(this.scroller,"oTransitionEnd",this),i(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var t,i,a=e.getComputedStyle(this.scroller,null);return this.options.useTransform?(a=a[l.style.transform].split(")")[0].split(", "),t=+(a[12]||a[4]),i=+(a[13]||a[5])):(t=+a.left.replace(/[^-\d.]/g,""),i=+a.top.replace(/[^-\d.]/g,"")),{x:t,y:i}},_animate:function(e,t,i,a){function s(){var h,f,v,m=l.getTime();if(m>=u)return n.isAnimating=!1,n._translate(e,t),void(n.resetPosition(n.options.bounceTime)||n._execEvent("scrollEnd"));m=(m-c)/i,v=a(m),h=(e-o)*v+o,f=(t-d)*v+d,n._translate(h,f),n.isAnimating&&r(s)}var n=this,o=this.x,d=this.y,c=l.getTime(),u=c+i;this.isAnimating=!0,s()},handleEvent:function(e){switch(e.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(e);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(e);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(e);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(e);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(e);break;case"keydown":this._key(e);break;case"click":e._constructed||(e.preventDefault(),e.stopPropagation())}}},a.utils=l,"undefined"!=typeof module&&module.exports?module.exports=a:e.IScroll=a}(window,document,Math);
//# sourceMappingURL=inventory-search-results.js.map
