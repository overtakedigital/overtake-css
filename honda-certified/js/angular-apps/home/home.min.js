function loadRecentVehicles(){var e=localStorage.vins.split("|"),t="";e.length>1?(e.length>4&&(e=e.slice(Math.max(e.length-4,1))),t=e.join("|")):t=e[0],console.log(e);var n="/handlers/get-vehicle-details.ashx?vin="+t;$.getJSON(n,function(e){var t=e.Output.Results;if(m.initStylesAttributesLists(t),console.log(t),null!==t.Models){var n=m.initCarsList(t.Models.Model);m.initDealersList(n,t.Dealers.Dealer);if(n.length>0){var l=angular.element($("#recentlyViewed")).scope();l.$apply(function(){l.recentCars=n,l.recentCarsCount=n.length,$(".viewed-vehicles").fadeIn()})}}else{console.log("models is null");var l=angular.element($("#recentlyViewed")).scope();l.$apply(function(){l.recentCarsCount=0})}}).fail(function(){new hcpv_rpa_util.GenError({container:$(".recentlyViewedError")}).setMessage({msg:"Sorry about that! It seems that recently viewed vehicles isn't working, but you can be sure we're working on getting it back up and running. Please check back in a bit.",closeButton:!0,template:"A"})})}searchApp.factory("utils",function(){var e=function(e,t){t||(t=location.href),e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n="[\\?&]"+e+"=([^&#]*)",l=new RegExp(n),r=l.exec(t);return null==r?null:r[1]};return{gup:e,_console:function(){return{log:function(t){1==e("debug")&&console.log("+ offersApp: "+t)},log2:function(t){1==e("debug")&&(console.log("+ offersApp: =============== start ==============="),console.log(t),console.log("+ offersApp: ++=============== end ==============="))}}}}}),searchApp.factory("offersDataService",["$http","utils",function(e,t){var n=new t._console;return{getData:function(t){return n.log("calling "+t),e({method:"GET",url:t}).then(function(e){return n.log("call successful"),e.data},function(e){n.log("call unsuccessful")})}}}]),searchApp.controller("currentOffersCtrl",["$scope","$http","utils","offersDataService",function(e,t,n,l){e.loadOffers=function(){localStorage.getItem("_GeoCurrentZipCode");l.getData("handlers/find-specials-by-filter-handler.ashx").then(function(e){if(null!=e.Output.Results.Specials){if(e.Output.Results.Specials.hasOwnProperty("Special")){var t=angular.element($("#copy")).scope();t.hasOffers=!0}}else{var t=angular.element($("#copy")).scope();t.hasOffers=!1}})},e.loadOffers()}]),searchApp.controller("recentViewCtrl",["$scope","$http","$filter",function(e,t,n){e.recentCars,e.recentCarsCount,null!==localStorage.getItem("vins")?loadRecentVehicles():e.recentCarsCount=0}]),searchApp.directive("onFinishRender",["$timeout",function(e){return{restrict:"A",link:function(t,n,l){!0===t.$last&&e(function(){$(".owl-carousel").owlCarousel({loop:!0,items:1,margin:10})})}}}]);