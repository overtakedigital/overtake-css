var app=angular.module("passingTheTorchApp",[]);app.controller("passingTheTorchCtrl",["$scope","$http","$filter","$sce","$window",function(t,e,l,a,i){function s(t){}t.consoleLog=o,t.topCta={},t.bottomCta={},t.displayData=[],t.allStories=[],t.allStoriesFilter=[],t.familyFilter=[],t.passionFilter=[],t.travelFilter=[],t.prideFilter=[];var r=matchMedia("(max-width:767px)"),o=function(t){console.log(t)},n=function(t){return t%2==0?"even":"odd"},p=function(t,e,l){return"odd"==t?"even"==e?"col-md-7 col-sm-7 col-xs-12 large-tile left-tile":"col-md-5 col-sm-5 col-xs-12 small-tile right-tile":"even"==e?"col-md-5 col-sm-5 col-xs-12 small-tile left-tile":"col-md-7 col-sm-7 col-xs-12 large-tile right-tile"};t.itemPos=n,t.itemClass=p,t.staticTile={title:"static title",cta:"static cta"},t.ctaFunction=function(t){"1"!=t.id&&"24"!=t.id||(i.open("/vehicle-search","_self"),_satellite.track("torch_inventory"))},t.navAllClass="selected",t.navFamClass="unselectedFam",t.navPassClass="unselectedPass",t.navTravClass="unselectedTrav",t.navPrideClass="unselectedPride",t.navFilter=function(e){t.navAllClass="unselected",t.navFamClass="unselectedFam",t.navPassClass="unselectedPass",t.navTravClass="unselectedTrav",t.navPrideClass="unselectedPride","all"==e&&(_satellite.track("torch_filter_all"),t.displayData=t.allStoriesFilter,t.navAllClass="selected",$(".owl-carousel").trigger("to.owl.carousel",0)),"family"==e&&(_satellite.track("torch_filter_family"),t.displayData=t.familyFilter,t.navFamClass="fam-selected",$(".owl-carousel").trigger("to.owl.carousel",0)),"passion"==e&&(_satellite.track("torch_filter_passions"),t.displayData=t.passionFilter,t.navPassClass="pass-selected",$(".owl-carousel").trigger("to.owl.carousel",1)),"travel"==e&&(_satellite.track("torch_filter_travel"),t.displayData=t.travelFilter,t.navTravClass="travel-selected",$(".owl-carousel").trigger("to.owl.carousel",3)),"pride"==e&&(_satellite.track("torch_filter_certified"),t.displayData=t.prideFilter,t.navPrideClass="pride-selected",$(".owl-carousel").trigger("to.owl.carousel",2))};var c=function(t,e,l){var a=t[e];t[e]=t[l],t[l]=a},d=function(){for(var e,l=t.allStories,a=0;a<l.length;a++)-1!==l[a].categories.indexOf("family")&&t.familyFilter.push(l[a]),-1!==l[a].categories.indexOf("passion")&&t.passionFilter.push(l[a]),-1!==l[a].categories.indexOf("travel")&&t.travelFilter.push(l[a]),-1!==l[a].categories.indexOf("pride")&&t.prideFilter.push(l[a]);t.familyFilter&&(t.familyFilter.length%2==0?(e=t.familyFilter.shift(),t.familyFilter.unshift(e,t.topCta),1==r.matches?t.familyFilter.push(t.bottomCta):(e=t.familyFilter.pop(),t.familyFilter.push(t.bottomCta,e),c(t.familyFilter,8,9))):(e=t.familyFilter.shift(),t.familyFilter.unshift(e,t.topCta))),t.passionFilter&&(t.passionFilter.length%2==0?(e=t.passionFilter.shift(),t.passionFilter.unshift(e,t.topCta),1==r.matches?t.passionFilter.push(t.bottomCta):(e=t.passionFilter.pop(),t.passionFilter.push(t.bottomCta,e),c(t.passionFilter,2,4),c(t.passionFilter,5,7))):(e=t.passionFilter.shift(),t.passionFilter.unshift(e,t.topCta))),t.travelFilter&&(t.travelFilter.length%2==0?(e=t.travelFilter.shift(),t.travelFilter.unshift(e,t.topCta),1==r.matches?t.travelFilter.push(t.bottomCta):(e=t.travelFilter.pop(),t.travelFilter.push(t.bottomCta,e),c(t.travelFilter,4,5))):(e=t.travelFilter.shift(),t.travelFilter.unshift(e,t.topCta))),t.prideFilter&&(t.prideFilter.length%2==0?(e=t.prideFilter.shift(),t.prideFilter.unshift(e,t.topCta),1==r.matches?t.prideFilter.push(t.bottomCta):(e=t.prideFilter.pop(),t.prideFilter.push(t.bottomCta,e),c(t.prideFilter,4,5))):(e=t.prideFilter.shift(),t.prideFilter.unshift(e,t.topCta)))};r.addListener(s);var F=function(e){for(var l,a=0;a<e.data.length;a++)"story"!==e.data[a].type&&"quote"!==e.data[a].type||(t.allStories.push(e.data[a]),t.allStoriesFilter.push(e.data[a])),"top-cta"==e.data[a].type&&(t.topCta=e.data[a]),"bottom-cta"==e.data[a].type&&(t.bottomCta=e.data[a]);t.allStoriesFilter&&(t.allStoriesFilter.length%2==0?(l=t.allStoriesFilter.shift(),t.allStoriesFilter.unshift(l,t.topCta),1==r.matches?t.allStoriesFilter.push(t.bottomCta):(l=t.allStoriesFilter.pop(),t.allStoriesFilter.push(t.bottomCta,l))):(l=t.allStoriesFilter.shift(),t.allStoriesFilter.unshift(l,t.topCta)),t.displayData=t.allStoriesFilter),d()};t.sanitizeItem=function(t){return a.trustAsHtml(t)},e.get("js/angular-apps/passing-the-torch/passing-the-torch-data.json").then(function(e){F(e),t.response=e}).catch(function(t){})}]);