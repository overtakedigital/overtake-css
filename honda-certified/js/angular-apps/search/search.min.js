searchApp.factory("searchDataService",["$http",function(e){return{getData:function(r){return e.get("/handlers/get-aggregated-inventory-data.ashx?radius=25&AutoExpandRadius=true&zip="+r).then(function(e){return e.data}).catch(function(){new hcpv_rpa_util.GenError({container:$(".searchError")}).setMessage({msg:"Sorry about that! It seems that Search isn't working, but you can be sure we're working on getting it back up and running. Please check back in a bit.",closeButton:!0,template:"A"})})}}}]),searchApp.controller("searchCtrl",["$scope","searchDataService",function(e,r){function a(e){if(-1!=e.indexOf("Accord Coupe"))var r="accord-coupe.png",a="2-door midsize car";else if(-1!=e.indexOf("Accord Hybrid"))var r="accord-hybrid.png",a="4-door midsize hybrid";else if(-1!=e.indexOf("Accord Sedan"))var r="accord-sedan.png",a="4-door midsize car";else if(-1!=e.indexOf("Civic Coupe"))var r="civic-coupe.png",a="2-door compact car";else if(-1!=e.indexOf("Civic Hatchback"))var r="civic-hatchback.png",a="5-door compact car";else if(-1!=e.indexOf("Civic HF"))var r="civic-hf.png",a="4-door compact car";else if(-1!=e.indexOf("Civic Hybrid"))var r="civic-hybrid.png",a="4-door compact hybrid";else if(-1!=e.indexOf("Civic Natural Gas"))var r="civic-natural-gas.png",a="4-door compact NGV";else if(-1!=e.indexOf("Civic Sedan"))var r="civic-sedan.png",a="4-door compact car";else if(-1!=e.indexOf("Civic Si Coupe"))var r="civic-si-coupe.png",a="2-door sport compact car";else if(-1!=e.indexOf("Civic Si Sedan"))var r="civic-si-sedan.png",a="4-door sport compact car";else if(-1!=e.indexOf("Crosstour"))var r="crosstour.png",a="5-door midsize car";else if(-1!=e.indexOf("CR-V"))var r="cr-v.png",a="Compact SUV";else if(-1!=e.indexOf("CR-Z"))var r="cr-z.png",a="3-door sport hybrid";else if(-1!=e.indexOf("Fit"))var r="fit.png",a="Subcompact hatchback";else if(-1!=e.indexOf("HR-V"))var r="hr-v.png",a="Subcompact SUV";else if(-1!=e.indexOf("Insight"))var r="insight.png",a="5-door compact hybrid";else if(-1!=e.indexOf("Odyssey"))var r="odyssey.png",a="Minivan";else if(-1!=e.indexOf("Pilot"))var r="pilot.png",a="Midsize SUV";else if(-1!=e.indexOf("Ridgeline"))var r="ridgeline.png",a="4-door midsize truck";else if(-1!=e.indexOf("Coupes"))var r="coupe.png",a="";else if(-1!=e.indexOf("Hybrids"))var r="hybrid.png",a="";else if(-1!=e.indexOf("Minivan"))var r="minivan.png",a="";else if(-1!=e.indexOf("Most Fuel Efficient"))var r="fuel-efficient.png",a="";else if(-1!=e.indexOf("Sedans"))var r="sedan.png",a="";else if(-1!=e.indexOf("Sport/Performance"))var r="sport.png",a="";else if(-1!=e.indexOf("SUVs/CUVs"))var r="suv.png",a="";else if(-1!=e.indexOf("Versatility/Utility"))var r="versatility.png",a="";else if(-1!=e.indexOf("Hatchback"))var r="hatchback.png",a="";else if(-1!=e.indexOf("Alternative Fuel"))var r="alternative-fuel.png",a="";else if(-1!=e.indexOf("Truck"))var r="truck.png",a="";return{imagePath:r,carDesc:a}}e.initPageNow=function(){debug&&console.log("init page Now 32 ANGULAR");var t=localStorage.getItem("_GeoCurrentZipCode");r.getData(t).then(function(r){debug&&console.log("Successful handler call."),e.contentLoaded=!0;var t=r.Output.Results.Aggregates.ModelGroups.Model,n=r.Output.Results.Aggregates.ModelGroupYears.Model,i=r.Output.Results.Aggregates.ModelGroupTrimYears.Model,l=r.Output.Results.Aggregates.ModelGroupTrims.Model,c=(r.Output.Results.Aggregates.ModelTransTrimYears.Model,r.Output.Results.Aggregates.BodyStyles.Body);dataModel1=t.map(function(e){var r=Object.keys(e);e.newKeyValue=r.map(function(r){if("@Count"!=r)return e[r]}).join(" ");var o=a(e.newKeyValue);return{ModelGroupName:e.newKeyValue,ModelName:e["@ModelGroupName"],Count:e["@Count"],Image:o.imagePath,Description:o.carDesc}});var s=dataModel1.sort(o({name:"Count",primer:parseInt,reverse:!0}));e.modelCount=s,dataModel2=n.map(function(e){var r=Object.keys(e);e.newKeyValue=r.map(function(r){if("@Count"!=r)return e[r]}).join(" ");var o=a(e.newKeyValue);return{ModelGroupName:e.newKeyValue.trim(),Year:e["@Year"],ModelName:e["@ModelGroupName"],Count:e["@Count"],Image:o.imagePath,Description:o.carDesc}});var d=dataModel2.sort(o({name:"Count",primer:parseInt,reverse:!0}));e.yearModelCount=d,dataModel3=l.map(function(e){var r=Object.keys(e);e.newKeyValue=r.map(function(r){if("@Count"!=r)return e[r]}).join(" ");var o=a(e.newKeyValue);return{ModelGroupName:e.newKeyValue.trim(),ModelName:e["@ModelGroupName"],Trim:e["@Trim"],Count:e["@Count"],Image:o.imagePath,Description:o.carDesc}});var u=dataModel3.sort(o({name:"Count",primer:parseInt,reverse:!0}));e.modelTrimCount=u,dataModel4=i.map(function(e){var r=Object.keys(e);e.newKeyValue=r.map(function(r){if("@Count"!=r)return e[r]}).join(" ");var o=a(e.newKeyValue);return{ModelGroupName:e.newKeyValue.trim(),Year:e["@Year"],ModelName:e["@ModelGroupName"],Trim:e["@Trim"],Count:e["@Count"],Image:o.imagePath,Description:o.carDesc}});var p=dataModel4.sort(o({name:"Count",primer:parseInt,reverse:!0}));e.yearModelTrimCount=p,dataModel6=c.map(function(e){var r=a(e["@Style"]);return{ModelGroupName:e["@Style"],Count:e["@Count"],Image:r.imagePath}});var f=dataModel6.sort(o({name:"Count",primer:parseInt,reverse:!0}));e.modelType=f})};var o;!function(){var e=function(e,r){return e==r?0:e<r?-1:1},r=function(r,a){var o=e,t=e;return r&&(t=function(e,a){return o(r(e),r(a))}),a?function(e,r){return-1*t(e,r)}:t};o=function(){for(var a,o,t,n=[],i=arguments.length,l=0;l<i;l++)a=arguments[l],"string"==typeof a?(o=a,t=e):(o=a.name,t=r(a.primer,a.reverse)),n.push({name:o,cmp:t});return function(e,r){for(var o,t,l=0;l<i&&(t=0,a=n[l],o=a.name,0===(t=a.cmp(e[o],r[o])));l++);return t}}}(),e.itemTypeClick=function(e){var r=e,a="../vehicle-search/?Style="+r.ModelGroupName;document.location=a},e.itemVehicleClick=function(e){var r=e,a=r.Year,o=r.Trim,t="../vehicle-search/?ModelGroupName="+r.ModelName;void 0!==a&&(t=t+"&Year="+a),void 0!==o&&(t=t+"&Trim="+o),document.location=t},e.searchTakeover=function(e){$("#close img, .form-group label, .form-group span.clear-form").removeClass("hideme"),$("#searchMe").addClass("search-icon1"),$("#clearMe").addClass("clear-form1"),$(".search-box").addClass("search-box1"),$(".search-box").attr("placeholder",""),$(".search-wrapper").addClass("fullscreen"),$("body").css("overflow-y","hidden"),$(".results-wrapper").show(),$(".no-result-wrapper").show()},e.stopSearch=function(){e.searchString="",$(".results-wrapper").hide(),$(".no-result-wrapper").hide(),$("#close img, .form-group label, .form-group span.clear-form").toggleClass("hideme"),$("#searchMe").toggleClass("search-icon1"),$("#clearMe").toggleClass("clear-form1"),$(".search-box").toggleClass("search-box1"),$(".search-box").attr("placeholder","What kind of Honda are you looking for?"),$(".search-wrapper").toggleClass("fullscreen"),$("body").css("overflow-y","visible")},e.clearForm=function(){e.searchString="",$("#search").focus()}}]),searchApp.filter("queryFilter",function(){return function(e){if(e=e||"",-1!=["a","c","f","g","h","i","n","o","p","r","s"].indexOf(e))return"model";if(-1!=["dx","l","lx","lx-","lx-p","lx-s","e","ex","ex v6","ex-","ex-l","ex-l v6","ex-t","t","rt","rtl","rtl-","rtl-t","rtl-e","rts"].indexOf(e))return"modeltrim";if(-1!="w/leather sport touring elite navigation special edition".indexOf(e))return"modeltrim";if(/^[a-zA-Z._-\s]+$/.test(e))return"model";if(/^[0-9]{1,4}$/.test(e))return"yearmodel";if(/\b\d{4}\b/.test(e)){var r=e.slice(4).trim(),a=r.substring(0,1);return","!=a&&"+"!=a||(r=r.slice(1).trim()),-1!=["dx","l","lx","lx-","lx-p","lx-s","e","ex","ex v6","ex-","ex-l","ex-l v6","ex-t","t","rt","rtl","rtl-","rtl-t","rtl-e","rts"].indexOf(r)?"yearmodeltrim":"yearmodel"}}}),searchApp.filter("searchFilter",function(){function e(e,r){if(!e||!r)return!0;e=e.toLowerCase(),r=r.toLowerCase();var a,o=r.split(" ");for(i=0;i<o.length;i++)if(a=new RegExp("\\b"+o[i]),!a.test(e))return!1;var t=/\b\d+\b/;return!(t.test(e)&&!t.test(r))}return function(r,a,o,t){var n=[];if(r)for(var i=0;i<r.length;i++){var l,c=r[i];void 0!==o.searchString&&(l=","==a.charAt(4)?a.replace(",",""):"+"==a.charAt(5)?a.replace("+",""):a),e(c.ModelGroupName,l)&&n.push(c)}return o["count_"+t]=n.length,o.model_Count=$("#model").val(),void 0===o.model_Count&&(o.model_Count=0),o.yearModel_Count=$("#yearModel").val(),void 0===o.yearModel_Count&&(o.yearModel_Count=0),o.modelTrim_Count=$("#modelTrim").val(),void 0===o.modelTrim_Count&&(o.modelTrim_Count=0),o.yearModelTrim_Count=$("#yearModelTrim").val(),void 0===o.yearModelTrim_Count&&(o.yearModelTrim_Count=0),n}});var ngScope=function(){return angular.element(document.querySelector("#search")).scope()};